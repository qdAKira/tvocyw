{"remainingRequest":"D:\\Git\\yangkou-balance-management-system\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\yangkou-balance-management-system\\src\\page\\layout.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\yangkou-balance-management-system\\src\\page\\layout.vue","mtime":1622618435248},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1613790689000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.array.last-index-of\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar sha1 = require('sha1');\n\nimport moment from \"moment\";\nimport SubMenu from '@/components/subMenu.vue';\nimport { addDegoins, password } from '@/request/api';\nexport default {\n  components: {\n    'sub-menu': SubMenu\n  },\n  data: function data() {\n    return {\n      collapsed: false,\n      dateTime: new Date(),\n      menu: JSON.parse(window.localStorage.getItem('children')),\n      openKeys: [],\n      rootSubmenuKeys: [],\n      breadcrumb: [],\n      fold: true,\n      avatar: require(\"../../static/image/uesr-header.png\"),\n      visible: false,\n      confirmLoading: false,\n      chineseUserName: global.chineseUserName,\n      form: this.$form.createForm(this, {\n        name: 'form'\n      })\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    setInterval(function () {\n      _this.dateTime = new Date();\n    }, 1000);\n    var keystr = this.$route.path; // console.log(keystr.substring(0, keystr.lastIndexOf(\"/\")))\n\n    this.keyCut(keystr);\n    var breadcrumbArray = this.breadcrumbCut(keystr, []);\n    this.breadcrumbHandle(breadcrumbArray, this.menu, 1); // 将从缓存中取出openKeys\n    // const openKeys = window.localStorage.getItem('openKeys')\n    // console.log(openKeys)\n    // if (openKeys) {\n    // \t// 存在即赋值\n    // \tthis.openKeys = JSON.parse(openKeys)\n    // }\n\n    this.menu.forEach(function (item) {\n      _this.rootSubmenuKeys.push(item.path);\n    });\n    console.log(this.rootSubmenuKeys);\n  },\n  methods: {\n    keyCut: function keyCut(key) {\n      key = key.substring(0, key.lastIndexOf(\"/\"));\n\n      if (key) {\n        this.openKeys.push(key);\n        this.keyCut(key);\n      }\n    },\n    breadcrumbCut: function breadcrumbCut(key, array) {\n      if (key) {\n        array.push(key);\n        key = key.substring(0, key.lastIndexOf(\"/\"));\n        return this.breadcrumbCut(key, array);\n      } else {\n        return array;\n      }\n    },\n    onOpenChange: function onOpenChange(openKeys) {\n      var _this2 = this;\n\n      console.log(openKeys); // this.openKeys = []\n      // 将当前打开的父级菜单存入缓存中\n      // debugger\n      //  控制只打开一个\n\n      var latestOpenKey = openKeys.find(function (key) {\n        return _this2.openKeys.indexOf(key) === -1;\n      });\n\n      if (this.rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\n        this.openKeys = openKeys;\n      } else {\n        this.openKeys = latestOpenKey ? [latestOpenKey] : [];\n      }\n    },\n    menuClick: function menuClick(e) {\n      // 获取到当前的key,并且跳转\n      this.$router.push({\n        path: e.key\n      });\n      var n = 1;\n      this.breadcrumb = [];\n      this.breadcrumbHandle(e.keyPath, this.menu, n);\n    },\n    breadcrumbHandle: function breadcrumbHandle(x, y, n) {\n      for (var i = 0; i < y.length; i++) {\n        if (x[x.length - n] == y[i].path) {\n          this.breadcrumb.push(y[i].meta.title);\n\n          if (y[i].children && y[i].children.length) {\n            this.breadcrumbHandle(x, y[i].children, n + 1);\n          } else {\n            return;\n          }\n        }\n      }\n    },\n    foldChange: function foldChange() {\n      this.fold = !this.fold;\n    },\n    exit: function exit() {\n      var _this3 = this;\n\n      this.$confirm({\n        title: '你确定要退出登录吗？',\n        centered: true,\n        onOk: function onOk() {\n          console.log('OK');\n          localStorage.setItem('token', '');\n          localStorage.setItem('regoins', '');\n          localStorage.setItem('regionID', '');\n          localStorage.setItem('roleID', '');\n          localStorage.setItem('userID', '');\n          localStorage.setItem('userName', ''); // localStorage.setItem('children', '')\n\n          _this3.$router.push('/login');\n        },\n        onCancel: function onCancel() {\n          console.log('Cancel');\n        }\n      });\n    },\n    handleOk: function handleOk(e) {\n      var _this4 = this;\n\n      e.preventDefault();\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          var data = values;\n          data.id = global.userID;\n          data.newPassword = sha1(data.newPassword).toUpperCase();\n          _this4.confirmLoading = true;\n          console.log(data);\n          password(data).then(function (res) {\n            if (res.status === '0') {\n              console.log(res);\n              _this4.visible = false;\n\n              _this4.$message.success(res.message, 3, _this4.form.setFieldsValue({\n                newPassword: ''\n              }));\n            } else {\n              console.log(res.message);\n            }\n\n            _this4.confirmLoading = false;\n          });\n        } else {}\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.visible = false;\n      this.form.setFieldsValue({\n        newPassword: ''\n      });\n    }\n  },\n  mounted: function mounted() {},\n  filters: {\n    timeFilter: function timeFilter(val) {\n      return moment(val).format('YYYY年MM月DD日') + '\\n' + moment(val).format('HH:mm:ss');\n    }\n  }\n};",{"version":3,"sources":["layout.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<a-layout class=\"components-layout\">\r\n\t\t<a-layout-header class=\"components-header\">\r\n\t\t\t<div class=\"components-logo\" />\r\n\t\t\t<div class=\"components-header-right\">\r\n\t\t\t\t<span class=\"components-header-title\">洋口园区水环境管理系统</span>\r\n\t\t\t\t<div class=\"components-header-system\">\r\n\t\t\t\t\t<!-- <div class=\"components-header-date\">\r\n\t\t\t\t\t\t<img src=\"../../static/test/tq-1.png\" alt=\"\">\r\n\t\t\t\t\t\t<div style=\"margin-left: 15px;\">{{dateTime | timeFilter}}</div>\r\n\t\t\t\t\t</div> -->\r\n\t\t\t\t\t<iframe style=\"margin-top: 15px;\" width=\"210\" height=\"60\" frameborder=\"0\" scrolling=\"no\" hspace=\"0\"\r\n\t\t\t\t\t\tsrc=\"https://i.tianqi.com/?c=code&a=getcode&color=%2300e4fd&id=12&num=1&py=nantong&icon=1\"></iframe>\r\n\t\t\t\t\t<div class=\"components-header-user\">\r\n\t\t\t\t\t\t<a-avatar class=\"components-header-img\" :size=\"51\" :src=\"avatar\" @click=\"visible = true\" />\r\n\t\t\t\t\t\t<div style=\"margin-left: 21px;\">{{chineseUserName}}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"components-header-exit\" @click=\"exit\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a-layout-header>\r\n\t\t<a-layout class=\"warp\">\r\n\t\t\t<a-layout-sider v-show=\"fold\" width=\"200\" class=\"components-sider\">\r\n\t\t\t\t<a-menu class=\"components-menu\" theme=\"dark\" :defaultSelectedKeys=\"[$route.path]\" :openKeys=\"openKeys\"\r\n\t\t\t\t\tmode=\"inline\" :inline-collapsed=\"collapsed\" data-i=\"111\" @openChange=\"onOpenChange\"\r\n\t\t\t\t\t@click=\"menuClick\">\r\n\t\t\t\t\t<template v-for=\"item in menu\">\r\n\t\t\t\t\t\t<a-menu-item v-if=\"!item.children || !item.children.length\" :key=\"item.path\">{{item.meta.title}}</a-menu-item>\r\n\t\t\t\t\t\t<sub-menu v-else :key=\"item.path\" :menu-info=\"item\" />\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<!-- <template v-for=\"item in menu\">\r\n\t\t\t\t\t\t<a-menu-item v-if=\"!item.children\" :key=\"item.path\">{{item.path}}</a-menu-item>\r\n\t\t\t\t\t\t<sub-menu v-else :key=\"item.path\" :menu-info=\"item\" />\r\n\t\t\t\t\t</template> -->\r\n\t\t\t\t</a-menu>\r\n\t\t\t\t<router-link class=\"components-media\" :to=\"{path:'/'}\">监控大屏</router-link>\r\n\t\t\t</a-layout-sider>\r\n\t\t\t<a-layout style=\"padding: 0 24px 24px 12px\">\r\n\t\t\t\t<div style=\"display: flex;align-items: center;\">\r\n\t\t\t\t\t<a-button style=\"margin-right: 5px;color: #000;\" type=\"link\" ghost\r\n\t\t\t\t\t\t:icon=\"fold ? 'menu-fold' : 'menu-unfold'\" @click=\"foldChange\" />\r\n\t\t\t\t\t<a-breadcrumb style=\"margin: 16px 0;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;\">\r\n\t\t\t\t\t\t<a-breadcrumb-item v-for=\"item in breadcrumb\" :key=\"item\">{{item}}</a-breadcrumb-item>\r\n\t\t\t\t\t</a-breadcrumb>\r\n\t\t\t\t</div>\r\n\t\t\t\t<a-layout-content :style=\"{margin: 0}\">\r\n\t\t\t\t\t<router-view />\r\n\t\t\t\t</a-layout-content>\r\n\t\t\t</a-layout>\r\n\t\t</a-layout>\r\n\t\t<a-modal title=\"修改密码\" :visible=\"visible\" :width=\"350\" centered :confirm-loading=\"confirmLoading\" @ok=\"handleOk\"\r\n\t\t\t@cancel=\"handleCancel\">\r\n\t\t\t<a-form :form=\"form\">\r\n\t\t\t\t<a-form-item>\r\n\t\t\t\t\t<a-input-password v-decorator=\"['newPassword', { rules: [{ required: true, message: '请输入新密码' }] }]\"\r\n\t\t\t\t\t\tplaceholder=\"密码\" />\r\n\t\t\t\t</a-form-item>\r\n\t\t\t</a-form>\r\n\t\t</a-modal>\r\n\t</a-layout>\r\n</template>\r\n<script>\r\n\tlet sha1 = require('sha1')\r\n\timport moment from \"moment\"\r\n\r\n\timport SubMenu from '@/components/subMenu.vue'\r\n\r\n\timport {\r\n\t\taddDegoins,\r\n\t\tpassword\r\n\t} from '@/request/api'\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\t'sub-menu': SubMenu,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcollapsed: false,\r\n\t\t\t\tdateTime: new Date(),\r\n\t\t\t\tmenu: JSON.parse(window.localStorage.getItem('children')),\r\n\t\t\t\topenKeys: [],\r\n\t\t\t\trootSubmenuKeys: [],\r\n\t\t\t\tbreadcrumb: [],\r\n\t\t\t\tfold: true,\r\n\t\t\t\tavatar: require('../../static/image/uesr-header.png'),\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tconfirmLoading: false,\r\n\t\t\t\tchineseUserName: global.chineseUserName,\r\n\t\t\t\tform: this.$form.createForm(this, {\r\n\t\t\t\t\tname: 'form',\r\n\t\t\t\t})\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tsetInterval(() => {\r\n\t\t\t\tthis.dateTime = new Date()\r\n\t\t\t}, 1000)\r\n\r\n\t\t\tlet keystr = this.$route.path\r\n\t\t\t// console.log(keystr.substring(0, keystr.lastIndexOf(\"/\")))\r\n\r\n\t\t\tthis.keyCut(keystr)\r\n\r\n\t\t\tconst breadcrumbArray = this.breadcrumbCut(keystr, [])\r\n\r\n\t\t\tthis.breadcrumbHandle(breadcrumbArray, this.menu, 1)\r\n\r\n\t\t\t// 将从缓存中取出openKeys\r\n\t\t\t// const openKeys = window.localStorage.getItem('openKeys')\r\n\t\t\t// console.log(openKeys)\r\n\t\t\t// if (openKeys) {\r\n\t\t\t// \t// 存在即赋值\r\n\t\t\t// \tthis.openKeys = JSON.parse(openKeys)\r\n\t\t\t// }\r\n\t\t\tthis.menu.forEach(item => {\r\n\t\t\t\tthis.rootSubmenuKeys.push(item.path)\r\n\t\t\t})\r\n\t\t\tconsole.log(this.rootSubmenuKeys)\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tkeyCut(key) {\r\n\t\t\t\tkey = key.substring(0, key.lastIndexOf(\"/\"))\r\n\t\t\t\tif (key) {\r\n\t\t\t\t\tthis.openKeys.push(key)\r\n\t\t\t\t\tthis.keyCut(key)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbreadcrumbCut(key, array) {\r\n\t\t\t\tif (key) {\r\n\t\t\t\t\tarray.push(key)\r\n\t\t\t\t\tkey = key.substring(0, key.lastIndexOf(\"/\"))\r\n\t\t\t\t\treturn this.breadcrumbCut(key, array)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn array\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonOpenChange(openKeys) {\r\n\t\t\t\tconsole.log(openKeys)\r\n\t\t\t\t// this.openKeys = []\r\n\t\t\t\t// 将当前打开的父级菜单存入缓存中\r\n\t\t\t\t// debugger\r\n\t\t\t\t//  控制只打开一个\r\n\t\t\t\tconst latestOpenKey = openKeys.find(key => this.openKeys.indexOf(key) === -1);\r\n\t\t\t\tif (this.rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\r\n\t\t\t\t\tthis.openKeys = openKeys;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.openKeys = latestOpenKey ? [latestOpenKey] : [];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmenuClick(e) {\r\n\t\t\t\t// 获取到当前的key,并且跳转\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: e.key\r\n\t\t\t\t})\r\n\t\t\t\tlet n = 1\r\n\t\t\t\tthis.breadcrumb = []\r\n\t\t\t\tthis.breadcrumbHandle(e.keyPath, this.menu, n)\r\n\t\t\t},\r\n\t\t\tbreadcrumbHandle(x, y, n) {\r\n\t\t\t\tfor (let i = 0; i < y.length; i++) {\r\n\t\t\t\t\tif (x[x.length - n] == y[i].path) {\r\n\t\t\t\t\t\tthis.breadcrumb.push(y[i].meta.title)\r\n\t\t\t\t\t\tif (y[i].children && y[i].children.length) {\r\n\t\t\t\t\t\t\tthis.breadcrumbHandle(x, y[i].children, n + 1)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfoldChange() {\r\n\t\t\t\tthis.fold = !this.fold\r\n\t\t\t},\r\n\t\t\texit() {\r\n\t\t\t\tthis.$confirm({\r\n\t\t\t\t\ttitle: '你确定要退出登录吗？',\r\n\t\t\t\t\tcentered: true,\r\n\t\t\t\t\tonOk: () => {\r\n\t\t\t\t\t\tconsole.log('OK')\r\n\t\t\t\t\t\tlocalStorage.setItem('token', '')\r\n\t\t\t\t\t\tlocalStorage.setItem('regoins', '')\r\n\t\t\t\t\t\tlocalStorage.setItem('regionID', '')\r\n\t\t\t\t\t\tlocalStorage.setItem('roleID', '')\r\n\t\t\t\t\t\tlocalStorage.setItem('userID', '')\r\n\t\t\t\t\t\tlocalStorage.setItem('userName', '')\r\n\t\t\t\t\t\t// localStorage.setItem('children', '')\r\n\t\t\t\t\t\tthis.$router.push('/login')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonCancel() {\r\n\t\t\t\t\t\tconsole.log('Cancel')\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleOk(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.form.validateFields((err, values) => {\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tlet data = values\r\n\t\t\t\t\t\tdata.id = global.userID\r\n\t\t\t\t\t\tdata.newPassword = sha1(data.newPassword).toUpperCase()\r\n\t\t\t\t\t\tthis.confirmLoading = true\r\n\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t\tpassword(data).then(res => {\r\n\t\t\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\tthis.visible = false\r\n\t\t\t\t\t\t\t\tthis.$message.success(res.message, 3, this.form.setFieldsValue({\r\n\t\t\t\t\t\t\t\t\tnewPassword: ''\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.confirmLoading = false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleCancel() {\r\n\t\t\t\tthis.visible = false\r\n\t\t\t\tthis.form.setFieldsValue({\r\n\t\t\t\t\tnewPassword: ''\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tfilters: {\r\n\t\t\ttimeFilter(val) {\r\n\t\t\t\treturn moment(val).format('YYYY年MM月DD日') + '\\n' + moment(val).format('HH:mm:ss')\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.components-logo {\r\n\t\twidth: 70px;\r\n\t\theight: 78px;\r\n\t\tbackground: url(../../static/image/logo.png) no-repeat 0 0 / 100% 100%;\r\n\t\tmargin-right: 25px;\r\n\t}\r\n\r\n\t.components-layout {\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.warp {\r\n\t\theight: calc(100% - 64px);\r\n\t}\r\n\r\n\t.components-header {\r\n\t\tbackground-color: #000a3b;\r\n\t\theight: 90px;\r\n\t\tpadding: 0 50px 0 35px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.components-menu {\r\n\t\tbackground-color: #0e1a51;\r\n\t}\r\n\r\n\t.components-menu .ant-menu-item-selected {\r\n\t\tbackground-color: #0465b5;\r\n\t}\r\n\r\n\t.components-header-title {\r\n\t\tfont-size: 30px;\r\n\t\tfont-weight: normal;\r\n\t\tfont-stretch: normal;\r\n\t\tletter-spacing: 0px;\r\n\t\tcolor: #0ee2f7;\r\n\t}\r\n\r\n\t.components-header-right {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.components-header-system {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.components-header-date {\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: normal;\r\n\t\tfont-stretch: normal;\r\n\t\tletter-spacing: 0px;\r\n\t\tcolor: #0febff;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-right: 30px;\r\n\t}\r\n\r\n\t.components-header-date>img {\r\n\t\twidth: 53px;\r\n\t\theight: 48px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.components-header-date>div {\r\n\t\tline-height: 30px;\r\n\t\twhite-space: pre-line;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.components-header-img {\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.components-header-user {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: normal;\r\n\t\tfont-stretch: normal;\r\n\t\tletter-spacing: 0px;\r\n\t\tcolor: #0febff;\r\n\t\tmargin-right: 25px;\r\n\t}\r\n\r\n\t.components-header-exit {\r\n\t\twidth: 66px;\r\n\t\theight: 66px;\r\n\t\tcursor: pointer;\r\n\t\tbackground: url(../../static/icon/exit.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.ant-form-item {\r\n\t\tmargin: 0;\r\n\t}\r\n\r\n\t.components-media {\r\n\t\tfont-size: 24px;\r\n\t\tcolor: #0ee2f6;\r\n\t\tposition: absolute;\r\n\t\theight: 50px;\r\n\t\tline-height: 50px;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\ttext-align: center;\r\n\t\tmargin: 0 auto;\r\n\t\tbackground-color: #001529;\r\n\t}\r\n\r\n\t@media screen and (max-width: 1050px) {\r\n\r\n\t\t.components-header-date>div,\r\n\t\t.components-header-user>div {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n\r\n\t@media screen and (max-width: 800px) {\r\n\r\n\t\t.components-header-right {\r\n\t\t\tjustify-content: flex-end;\r\n\t\t}\r\n\r\n\t\t.components-header-title {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n<style>\r\n\t.components-menu .ant-menu {\r\n\t\tbackground-color: #151f4d !important;\r\n\t}\r\n\r\n\t.components-sider .ant-layout-sider-children {\r\n\t\toverflow-y: scroll;\r\n\t\tscrollbar-width: none;\r\n\t\t/* Firefox */\r\n\t\t-ms-overflow-style: none;\r\n\t\t/* IE 10+ */\r\n\t\tpadding-bottom: 50px;\r\n\t}\r\n\r\n\t.components-sider .ant-layout-sider-children::-webkit-scrollbar {\r\n\t\tdisplay: none;\r\n\t\t/* Chrome Safari */\r\n\t}\r\n</style>\n"],"sourceRoot":"src/page"}]}