{"remainingRequest":"D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\yangkou-balance-management-system\\src\\page\\polSouManagement\\enterExpInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\yangkou-balance-management-system\\src\\page\\polSouManagement\\enterExpInfo.vue","mtime":1623032204394},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1613790689000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.array.map\";\nimport _objectSpread from \"D:\\\\Git\\\\yangkou-balance-management-system\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SubModule from '@/components/subModule.vue';\nimport fileDownload from 'js-file-download';\nimport { getCompanyList, companyHoles, getFactor, natureType } from '@/request/api';\nimport { delCompanyHole, insertHole, editHole, getHoleNature, getPollutedFactor, getPollutedFactorByID } from '@/request/api2';\nexport default {\n  components: {\n    'sub-menu': SubModule\n  },\n  data: function data() {\n    return {\n      roleID: global.roleID,\n      cID: global.companyID,\n      value: [],\n      modalShow: false,\n      modalTitle: '新增',\n      confirmLoading: false,\n      form: this.$form.createForm(this, {\n        name: 'moad'\n      }),\n      fieldNames: {\n        children: 'child',\n        label: 'name',\n        value: 'id'\n      },\n      regionData: global.addDegoins,\n      RegionID: null,\n      regionID: global.regionID,\n      companyList: [],\n      pointNatureList: [],\n      pollutedTypeList: [],\n      factorList: [],\n      factorIDs: [],\n      factorNames: [],\n      CompanyID: [],\n      MNNumber: '',\n      scrollx: '',\n      scrolly: '',\n      columns: [{\n        title: '序号',\n        dataIndex: 'number',\n        scopedSlots: {\n          customRender: 'number'\n        },\n        align: 'center',\n        width: 50\n      }, {\n        title: '企业名称',\n        dataIndex: 'companyName',\n        align: 'center',\n        width: 250\n      }, {\n        title: '排口名称',\n        dataIndex: 'holeName',\n        align: 'center'\n      }, {\n        title: '排口编号',\n        dataIndex: 'holeCode',\n        align: 'center'\n      }, {\n        title: '监控点性质',\n        dataIndex: 'pointNature',\n        align: 'center'\n      }, {\n        title: '排口性质',\n        dataIndex: 'outletNature',\n        align: 'center'\n      }, {\n        title: '污染物类别',\n        dataIndex: 'pollutedType',\n        align: 'center'\n      }, {\n        title: '设备MN号',\n        dataIndex: 'mnNumber',\n        align: 'center',\n        width: 200\n      }, {\n        title: '阀门控制方式',\n        dataIndex: 'valveControlModel',\n        align: 'center'\n      }, {\n        title: '自动阀门依据',\n        dataIndex: 'automaticControlValve',\n        align: 'center'\n      }, {\n        title: '操作',\n        scopedSlots: {\n          customRender: 'action'\n        },\n        width: 120,\n        align: 'center',\n        dataIndex: 'id'\n      }],\n      loading: false,\n      data: [],\n      pagination: {\n        defaultPageSize: 20,\n        pageSize: 20,\n        showQuickJumper: true,\n        showSizeChanger: true,\n        current: 1,\n        total: 0\n      },\n      IdBatch: [],\n      selectedRowKeys: [],\n      outletNatureList: []\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // 获取企业列表\n    this.getCompany(); //获取污染物类别\n\n    getFactor().then(function (res) {\n      if (res.status === '0') {\n        _this.pollutedTypeList = res.result;\n      } else {\n        console.log(res.message);\n      }\n    }); //获取排口监控点性质\n\n    getHoleNature().then(function (res) {\n      if (res.status === '0') {\n        _this.pointNatureList = res.result;\n      } else {\n        console.log(res.message);\n      }\n    });\n    natureType().then(function (res) {\n      if (res.status === '0') {\n        _this.outletNatureList = res.result;\n      } else {\n        console.log(res.message);\n      }\n    }); //获取污染物因子\n\n    getPollutedFactor().then(function (res) {\n      if (res.status === '0') {\n        _this.factorList = res.result;\n      } else {\n        console.log(res.message);\n      }\n    });\n    var data = {\n      PageIndex: this.pagination.current - 1,\n      PageSize: this.pagination.pageSize,\n      RegionID: global.regionID,\n      companyId: this.roleID === '3' ? this.cID : this.CompanyID // 获取第一页数据\n\n    };\n    this.getData(data);\n  },\n  mounted: function mounted() {},\n  methods: {\n    regionChange: function regionChange(value) {\n      this.RegionID = value[value.length - 1];\n      this.companyList = [];\n      this.CompanyID = [];\n    },\n    // 获取企业列表方法\n    getCompany: function getCompany() {\n      var _this2 = this;\n\n      getCompanyList({\n        regionId: this.RegionID ? this.RegionID : this.regionID\n      }).then(function (res) {\n        if (res.status === '0') {\n          _this2.companyList = res.result;\n        } else {\n          console.log(res.message);\n        }\n      });\n    },\n    companyFocus: function companyFocus() {\n      this.getCompany();\n    },\n    getData: function getData(data) {\n      var _this3 = this;\n\n      this.loading = true;\n      companyHoles(data).then(function (res) {\n        if (res.status === '0') {\n          _this3.data = res.result.list;\n\n          var pagination = _objectSpread({}, _this3.pagination);\n\n          pagination.total = res.result.total;\n          _this3.pagination = pagination;\n        } else {\n          console.log(res.message);\n        }\n\n        _this3.loading = false;\n      });\n    },\n    pageChange: function pageChange(pagination, filters, sorter) {\n      var pager = _objectSpread({}, this.pagination);\n\n      pager.current = pagination.current;\n      pager.pageSize = pagination.pageSize;\n      this.pagination = pager;\n      var data = {\n        RegionID: this.RegionID ? this.RegionID : this.regionID,\n        CompanyID: this.roleID === '3' ? this.cID : this.CompanyID,\n        MNNumber: '',\n        PageIndex: pagination.current - 1,\n        PageSize: pagination.pageSize\n      };\n      this.getData(data);\n    },\n    search: function search() {\n      this.pagination.current = 1;\n      this.data = [];\n      var data = {\n        RegionID: this.RegionID ? this.RegionID : this.regionID,\n        CompanyID: this.roleID === '3' ? this.cID : this.CompanyID,\n        MNNumber: '',\n        PageIndex: this.pagination.current - 1,\n        PageSize: this.pagination.pageSize\n      };\n      this.getData(data);\n    },\n    // 新增\n    toAdded: function toAdded() {\n      this.modalTitle = '新增';\n      this.modalShow = true;\n    },\n    toEdit: function toEdit(data) {\n      var params = {\n        holdId: data.id\n      };\n      this.modalTitle = '修改';\n      this.modalShow = true;\n      this.form.setFieldsValue({\n        id: data.id,\n        companyID: data.companyID ? {\n          key: data.companyID,\n          label: data.companyName\n        } : [],\n        holeName: data.holeName,\n        holeCode: data.holeCode,\n        pointNatureID: data.pointNatureID ? {\n          key: data.pointNatureID,\n          label: data.pointNature\n        } : [],\n        pollutedTypeID: data.pollutedTypeID ? {\n          key: data.pollutedTypeID,\n          label: data.pollutedType\n        } : [],\n        outletNatureID: data.outletNatureID ? {\n          key: data.outletNatureID,\n          label: data.outletNature\n        } : [],\n        mnNumber: data.mnNumber,\n        longitude: data.latitude,\n        latitude: data.longitude,\n        factorList: data.factorList.map(function (item) {\n          return JSON.stringify(item);\n        })\n      });\n    },\n    // 提交\n    handleOk: function handleOk(e) {\n      var _this4 = this;\n\n      e.preventDefault();\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          _this4.confirmLoading = true;\n          var data = {\n            id: values.id,\n            companyID: values.companyID.key,\n            companyName: values.companyID.label,\n            holeName: values.holeName,\n            holeCode: values.holeCode,\n            pointNatureID: values.pointNatureID.key,\n            pointNature: values.pointNatureID.label,\n            pollutedTypeID: values.pollutedTypeID.key,\n            pollutedType: values.pollutedTypeID.label,\n            outletNatureID: values.outletNatureID.key,\n            outletNature: values.outletNatureID.label,\n            mnNumber: values.mnNumber,\n            factorList: values.factorList.map(function (item) {\n              return JSON.parse(item).id;\n            }),\n            factorNames: values.factorList.map(function (item) {\n              return JSON.parse(item).factorName;\n            }),\n            longitude: values.longitude,\n            latitude: values.latitude\n          };\n\n          if (_this4.modalTitle == '新增') {\n            _this4.added(data);\n          } else {\n            _this4.edit(data);\n          }\n\n          _this4.confirmLoading = false;\n        }\n      });\n    },\n    added: function added(data) {\n      var _this5 = this;\n\n      insertHole(data).then(function (res) {\n        if (res.status === '0') {\n          _this5.modalShow = false;\n\n          _this5.reduction();\n\n          _this5.$message.success('添加成功', 3, _this5.refresh());\n        } else {\n          console.log(res.message);\n        }\n\n        _this5.confirmLoading = false;\n      });\n    },\n    edit: function edit(data) {\n      var _this6 = this;\n\n      editHole(data).then(function (res) {\n        if (res.status === '0') {\n          _this6.modalShow = false;\n\n          _this6.reduction();\n\n          _this6.$message.success('修改成功', 3, _this6.refresh());\n        } else {\n          console.log(res.message);\n        }\n\n        _this6.confirmLoading = false;\n      });\n    },\n    delBatch: function delBatch() {\n      var _this7 = this;\n\n      if (this.IdBatch.length) {\n        this.$confirm({\n          title: '你确定要删除选择的企业排口吗？',\n          content: '删除之后将不可恢复，请谨慎删除。',\n          centered: true,\n          onOk: function onOk() {\n            delCompanyHole({\n              id: _this7.IdBatch\n            }).then(function (res) {\n              if (res.status === '0') {\n                _this7.$message.success('删除成功', 3, _this7.refresh());\n\n                _this7.IdBatch = [];\n              } else {\n                console.log(res.message);\n              }\n            });\n          },\n          onCancel: function onCancel() {\n            console.log('Cancel');\n          }\n        });\n      }\n    },\n    reduction: function reduction() {\n      this.form.setFieldsValue({\n        companyID: [],\n        holeName: \"\",\n        holeCode: \"\",\n        pointNatureID: [],\n        pollutedTypeID: [],\n        mnNumber: \"\",\n        id: '',\n        longitude: '',\n        latitude: '',\n        factorList: []\n      });\n    },\n    refresh: function refresh() {\n      this.CompanyID = [];\n      this.RegionID = null;\n      this.MNNumber = '';\n      this.search();\n    },\n    checkOnChange: function checkOnChange(e, checkedValues) {\n      if (e.target.checked) {\n        this.factorNames.push(checkedValues.factorName);\n        this.factorIDs.push(checkedValues.id);\n      } else {\n        this.factorNames.splice(this.factorNames.indexOf(checkedValues.factorName), 1);\n        this.factorIDs.splice(this.factorIDs.indexOf(checkedValues.id), 1);\n      }\n    },\n    tableHeight: function tableHeight(data) {\n      this.scrolly = data - 75;\n    },\n    handleCancel: function handleCancel() {\n      this.reduction();\n      this.modalShow = false;\n    },\n    customRow: function customRow(record, index) {\n      return {\n        style: {\n          backgroundColor: index % 2 ? '#fff' : '#f0f2f5'\n        }\n      };\n    },\n    onSelectChange: function onSelectChange(selectedRowKeys) {\n      this.IdBatch = selectedRowKeys;\n    }\n  },\n  computed: {\n    rowSelection: function rowSelection() {\n      var _this8 = this;\n\n      return {\n        onChange: function onChange(selectedRowKeys, selectedRows) {\n          _this8.IdBatch = selectedRowKeys;\n        }\n      };\n    }\n  }\n};",{"version":3,"sources":["enterExpInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<sub-menu @getHeight=\"tableHeight($event)\">\r\n\t\t<template slot=\"left\">\r\n\t\t\t<a-button type=\"primary\" @click=\"toAdded\">新增</a-button>\r\n\t\t\t<a-button type=\"danger\" @click=\"delBatch\">删除{{IdBatch.length ? '(' + IdBatch.length + ')' : ''}}</a-button>\r\n\t\t</template>\r\n\t\t<template slot=\"right\">\r\n\t\t\t<a-cascader v-if =\"cID==='null'?true:false\"   :options=\"regionData\" :fieldNames=\"fieldNames\" placeholder=\"行政区区域\" style=\"width: 150px\"\r\n\t\t\t\tchange-on-select @change=\"regionChange\" />\r\n\t\t\t<a-select  v-if =\"cID==='null'?true:false\"   show-search v-model=\"CompanyID\" placeholder=\"企业\" option-filter-prop=\"children\"\r\n\t\t\t\tstyle=\"width: 150px\" @focus=\"companyFocus\">\r\n\t\t\t\t<a-select-option v-for=\"item in companyList\" :value=\"item.id\" :key=\"item.id\">{{item.companyName}}\r\n\t\t\t\t</a-select-option>\r\n\t\t\t</a-select>\r\n\t\t\t<a-input v-model=\"MNNumber\" placeholder=\"MN号\" />\r\n\t\t\t<a-button type=\"primary\" @click=\"search\">查询</a-button>\r\n\t\t</template>\r\n\t\t<template slot=\"table\">\r\n\t\t\t<a-table :row-selection=\"{ selectedRowKeys: IdBatch, onChange: onSelectChange }\" style=\"height: 100%;\"\r\n\t\t\t\t:columns=\"columns\" :data-source=\"data\" :loading=\"loading\" :scroll=\"{ x: scrollx,y: scrolly }\"\r\n\t\t\t\t:rowKey=\"record => record.id\" size=\"middle\" :pagination=\"pagination\" @change=\"pageChange\"\r\n\t\t\t\t:customRow=\"customRow\">\r\n\t\t\t\t<span slot=\"number\" slot-scope=\"text, record, index\">\r\n\t\t\t\t\t{{index + 1 }}\r\n\t\t\t\t</span>\r\n\t\t\t\t<template slot=\"action\" slot-scope=\"text, record\">\r\n\t\t\t\t\t<a-button type=\"primary\" size=\"small\" @click=\"toEdit(record)\">修改</a-button>\r\n\t\t\t\t</template>\r\n\t\t\t</a-table>\r\n\t\t</template>\r\n\t\t<template slot=\"fixed\">\r\n\t\t\t<a-modal class=\"ant-advanced-search-form\" :maskClosable=\"true\" forceRender :title=\"modalTitle\"\r\n\t\t\t\t:visible=\"modalShow\" :width=\"750\" centered :confirm-loading=\"confirmLoading\" @ok=\"handleOk\"\r\n\t\t\t\t@cancel=\"handleCancel\">\r\n\t\t\t\t<a-form :form=\"form\" layout=\"inline\" labelAlign=\"right\" :labelCol=\"{span: 8, offset: 0}\"\r\n\t\t\t\t\t:wrapperCol=\"{span: 16, offset: 0}\">\r\n\t\t\t\t\t<a-row :gutter=\"24\">\r\n\t\t\t\t\t\t<a-col :span=\"12\" v-show=\"false\">\r\n\t\t\t\t\t\t\t<a-form-item>\r\n\t\t\t\t\t\t\t\t<a-input v-decorator=\"['id',{initialValue: ''}]\" />\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"企业名称\">\r\n\t\t\t\t\t\t\t\t<a-select label-in-value option-filter-prop=\"children\"\r\n\t\t\t\t\t\t\t\t\tv-decorator=\"['companyID',{ rules: [{ required: true, message: '请选择企业' }],initialValue:[]}]\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"企业名称\">\r\n\t\t\t\t\t\t\t\t\t<a-select-option v-for=\"item in companyList\" :key=\"item.id\">{{item.companyName}}</a-select-option>\r\n\t\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"排口名称\">\r\n\t\t\t\t\t\t\t\t<a-input\r\n\t\t\t\t\t\t\t\t\tv-decorator=\"['holeName', { rules: [{ required: true, message: '请输入排口名称' }] ,initialValue: '' }]\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"排口名称\" />\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"排口编号\">\r\n\t\t\t\t\t\t\t\t<a-input v-decorator=\"['holeCode',{initialValue: ''}]\" placeholder=\"排口编号\" />\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"监控点性质\">\r\n\t\t\t\t\t\t\t\t<a-select label-in-value option-filter-prop=\"children\"\r\n\t\t\t\t\t\t\t\t\tv-decorator=\"['pointNatureID',{initialValue: []}]\" placeholder=\"监控点性质\">\r\n\t\t\t\t\t\t\t\t\t<a-select-option v-for=\"item in pointNatureList\" :key=\"item.id\">{{item.name}}\r\n\t\t\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"排口性质\">\r\n\t\t\t\t\t\t\t\t<a-select label-in-value option-filter-prop=\"children\"\r\n\t\t\t\t\t\t\t\t\tv-decorator=\"['outletNatureID',{initialValue: []}]\" placeholder=\"排口性质\">\r\n\t\t\t\t\t\t\t\t\t<a-select-option v-for=\"item in outletNatureList\" :key=\"item.id\">{{item.name}}\r\n\t\t\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"污染物类别\">\r\n\t\t\t\t\t\t\t\t<a-select label-in-value option-filter-prop=\"children\"\r\n\t\t\t\t\t\t\t\t\tv-decorator=\"['pollutedTypeID',{initialValue: []}]\" placeholder=\"污染物类别\">\r\n\t\t\t\t\t\t\t\t\t<a-select-option v-for=\"item in pollutedTypeList\" :key=\"item.id\">{{item.name}}\r\n\t\t\t\t\t\t\t\t\t</a-select-option>\r\n\t\t\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"设备MN号\">\r\n\t\t\t\t\t\t\t\t<a-input\r\n\t\t\t\t\t\t\t\t\tv-decorator=\"['mnNumber', { rules: [{ required: true, message: '请输入设备MN号' }] ,initialValue: '' }]\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"设备MN号\" />\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"排口经度\">\r\n\t\t\t\t\t\t\t\t<a-input\r\n\t\t\t\t\t\t\t\t\tv-decorator=\"['longitude', { rules: [{ required: true, message: '请输入排口经度' }] ,initialValue: '' }]\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"(示例格式): 121.01747297055056\" />\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"12\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"排口纬度\">\r\n\t\t\t\t\t\t\t\t<a-input\r\n\t\t\t\t\t\t\t\t\tv-decorator=\"['latitude', { rules: [{ required: true, message: '请输入排口纬度' }] ,initialValue: '' }]\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"(示例格式):32.53790189090469\" />\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"24\" style=\"padding-left: 6px;\">\r\n\t\t\t\t\t\t\t<a-form-item label=\"污染物因子\" :labelCol=\"{span: 4, offset: 0}\"\r\n\t\t\t\t\t\t\t\t:wrapperCol=\"{span: 20, offset: 0}\">\r\n\t\t\t\t\t\t\t\t<a-checkbox-group v-decorator=\"['factorList',{initialValue: []}]\">\r\n\t\t\t\t\t\t\t\t\t<a-row>\r\n\t\t\t\t\t\t\t\t\t\t<a-col :span=\"6\" v-for=\"(item,index) in factorList\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t\t<a-checkbox :value=\"JSON.stringify(item)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{item.factorName}}\r\n\t\t\t\t\t\t\t\t\t\t\t</a-checkbox>\r\n\t\t\t\t\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t\t\t\t</a-row>\r\n\t\t\t\t\t\t\t\t</a-checkbox-group>\r\n\t\t\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t</a-row>\r\n\t\t\t\t</a-form>\r\n\t\t\t</a-modal>\r\n\t\t</template>\r\n\t</sub-menu>\r\n</template>\r\n\r\n<script>\r\n\timport SubModule from '@/components/subModule.vue'\r\n\timport fileDownload from 'js-file-download'\r\n\r\n\timport {\r\n\t\tgetCompanyList,\r\n\t\tcompanyHoles,\r\n\t\tgetFactor,\r\n\t\tnatureType\r\n\t} from '@/request/api'\r\n\r\n\timport {\r\n\t\tdelCompanyHole,\r\n\t\tinsertHole,\r\n\t\teditHole,\r\n\t\tgetHoleNature,\r\n\t\tgetPollutedFactor,\r\n\t\tgetPollutedFactorByID\r\n\t} from '@/request/api2'\r\n\r\n\r\n\r\n\texport default ({\r\n\t\tcomponents: {\r\n\t\t\t'sub-menu': SubModule\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\troleID:global.roleID,\r\n\t\t\t\tcID:global.companyID,\t\t\t\t\r\n\t\t\t\tvalue: [],\r\n\t\t\t\tmodalShow: false,\r\n\t\t\t\tmodalTitle: '新增',\r\n\t\t\t\tconfirmLoading: false,\r\n\t\t\t\tform: this.$form.createForm(this, {\r\n\t\t\t\t\tname: 'moad'\r\n\t\t\t\t}),\r\n\t\t\t\tfieldNames: {\r\n\t\t\t\t\tchildren: 'child',\r\n\t\t\t\t\tlabel: 'name',\r\n\t\t\t\t\tvalue: 'id',\r\n\t\t\t\t},\r\n\t\t\t\tregionData: global.addDegoins,\r\n\t\t\t\tRegionID: null,\r\n\t\t\t\tregionID: global.regionID,\r\n\t\t\t\tcompanyList: [],\r\n\t\t\t\tpointNatureList: [],\r\n\t\t\t\tpollutedTypeList: [],\r\n\r\n\t\t\t\tfactorList: [],\r\n\t\t\t\tfactorIDs: [],\r\n\t\t\t\tfactorNames: [],\r\n\r\n\t\t\t\tCompanyID: [],\r\n\t\t\t\tMNNumber: '',\r\n\t\t\t\tscrollx: '',\r\n\t\t\t\tscrolly: '',\r\n\t\t\t\tcolumns: [{\r\n\t\t\t\t\t\ttitle: '序号',\r\n\t\t\t\t\t\tdataIndex: 'number',\r\n\t\t\t\t\t\tscopedSlots: {\r\n\t\t\t\t\t\t\tcustomRender: 'number'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t\twidth: 50\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttitle: '企业名称',\r\n\t\t\t\t\t\tdataIndex: 'companyName',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t\twidth: 250\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttitle: '排口名称',\r\n\t\t\t\t\t\tdataIndex: 'holeName',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttitle: '排口编号',\r\n\t\t\t\t\t\tdataIndex: 'holeCode',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttitle: '监控点性质',\r\n\t\t\t\t\t\tdataIndex: 'pointNature',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttitle: '排口性质',\r\n\t\t\t\t\t\tdataIndex: 'outletNature',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttitle: '污染物类别',\r\n\t\t\t\t\t\tdataIndex: 'pollutedType',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttitle: '设备MN号',\r\n\t\t\t\t\t\tdataIndex: 'mnNumber',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t\twidth: 200\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttitle: '阀门控制方式',\r\n\t\t\t\t\t\tdataIndex: 'valveControlModel',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttitle: '自动阀门依据',\r\n\t\t\t\t\t\tdataIndex: 'automaticControlValve',\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '操作',\r\n\t\t\t\t\t\tscopedSlots: {\r\n\t\t\t\t\t\t\tcustomRender: 'action'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\twidth: 120,\r\n\t\t\t\t\t\talign: 'center',\r\n\t\t\t\t\t\tdataIndex: 'id'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tloading: false,\r\n\t\t\t\tdata: [],\r\n\t\t\t\tpagination: {\r\n\t\t\t\t\tdefaultPageSize: 20,\r\n\t\t\t\t\tpageSize: 20,\r\n\t\t\t\t\tshowQuickJumper: true,\r\n\t\t\t\t\tshowSizeChanger: true,\r\n\t\t\t\t\tcurrent: 1,\r\n\t\t\t\t\ttotal: 0\r\n\t\t\t\t},\r\n\t\t\t\tIdBatch: [],\r\n\t\t\t\tselectedRowKeys: [],\r\n\t\t\t\toutletNatureList: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// 获取企业列表\r\n\t\t\tthis.getCompany()\r\n\r\n\t\t\t//获取污染物类别\r\n\t\t\tgetFactor().then(res => {\r\n\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\tthis.pollutedTypeList = res.result\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t//获取排口监控点性质\r\n\t\t\tgetHoleNature().then(res => {\r\n\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\tthis.pointNatureList = res.result\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tnatureType().then(res => {\r\n\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\tthis.outletNatureList = res.result\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t//获取污染物因子\r\n\t\t\tgetPollutedFactor().then(res => {\r\n\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\tthis.factorList = res.result\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\r\n\r\n\t\t\tlet data = {\r\n\t\t\t\tPageIndex: this.pagination.current - 1,\r\n\t\t\t\tPageSize: this.pagination.pageSize,\r\n\t\t\t\tRegionID: global.regionID,\r\n\t\t\t\tcompanyId:this.roleID==='3'?this.cID:this.CompanyID\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 获取第一页数据\r\n\t\t\tthis.getData(data)\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tmethods: {\r\n\t\t\tregionChange(value) {\r\n\t\t\t\tthis.RegionID = value[value.length - 1]\r\n\t\t\t\tthis.companyList = []\r\n\t\t\t\tthis.CompanyID = []\r\n\t\t\t},\r\n\t\t\t// 获取企业列表方法\r\n\t\t\tgetCompany() {\r\n\t\t\t\tgetCompanyList({\r\n\t\t\t\t\tregionId: this.RegionID ? this.RegionID : this.regionID,\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\tthis.companyList = res.result\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcompanyFocus() {\r\n\t\t\t\tthis.getCompany()\r\n\t\t\t},\r\n\t\t\tgetData(data) {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tcompanyHoles(data).then(res => {\r\n\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\tthis.data = res.result.list\r\n\t\t\t\t\t\tconst pagination = {\r\n\t\t\t\t\t\t\t...this.pagination\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpagination.total = res.result.total\r\n\t\t\t\t\t\tthis.pagination = pagination\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpageChange(pagination, filters, sorter) {\r\n\t\t\t\tconst pager = {\r\n\t\t\t\t\t...this.pagination\r\n\t\t\t\t}\r\n\t\t\t\tpager.current = pagination.current\r\n\t\t\t\tpager.pageSize = pagination.pageSize\r\n\t\t\t\tthis.pagination = pager\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tRegionID: this.RegionID ? this.RegionID : this.regionID,\r\n\t\t\t\t\tCompanyID: this.roleID==='3'? this.cID:this.CompanyID,\r\n\t\t\t\t\tMNNumber: '',\r\n\t\t\t\t\tPageIndex: pagination.current - 1,\r\n\t\t\t\t\tPageSize: pagination.pageSize\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.getData(data)\r\n\t\t\t},\r\n\t\t\tsearch() {\r\n\t\t\t\tthis.pagination.current = 1\r\n\t\t\t\tthis.data = []\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tRegionID: this.RegionID ? this.RegionID : this.regionID,\r\n\t\t\t\t\tCompanyID: this.roleID==='3'? this.cID:this.CompanyID,\r\n\t\t\t\t\tMNNumber: '',\r\n\t\t\t\t\tPageIndex: this.pagination.current - 1,\r\n\t\t\t\t\tPageSize: this.pagination.pageSize\r\n\t\t\t\t}\r\n\t\t\t\tthis.getData(data)\r\n\t\t\t},\r\n\r\n\t\t\t// 新增\r\n\t\t\ttoAdded() {\r\n\t\t\t\tthis.modalTitle = '新增'\r\n\t\t\t\tthis.modalShow = true;\r\n\t\t\t},\r\n\t\t\ttoEdit(data) {\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tholdId: data.id\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.modalTitle = '修改'\r\n\t\t\t\tthis.modalShow = true;\r\n\t\t\t\tthis.form.setFieldsValue({\r\n\t\t\t\t\tid: data.id,\r\n\t\t\t\t\tcompanyID: data.companyID ? {\r\n\t\t\t\t\t\tkey: data.companyID,\r\n\t\t\t\t\t\tlabel: data.companyName\r\n\t\t\t\t\t} : [],\r\n\t\t\t\t\tholeName: data.holeName,\r\n\t\t\t\t\tholeCode: data.holeCode,\r\n\t\t\t\t\tpointNatureID: data.pointNatureID ? {\r\n\t\t\t\t\t\tkey: data.pointNatureID,\r\n\t\t\t\t\t\tlabel: data.pointNature\r\n\t\t\t\t\t} : [],\r\n\t\t\t\t\tpollutedTypeID: data.pollutedTypeID ? {\r\n\t\t\t\t\t\tkey: data.pollutedTypeID,\r\n\t\t\t\t\t\tlabel: data.pollutedType\r\n\t\t\t\t\t} : [],\r\n\t\t\t\t\toutletNatureID: data.outletNatureID ? {\r\n\t\t\t\t\t\tkey: data.outletNatureID,\r\n\t\t\t\t\t\tlabel: data.outletNature\r\n\t\t\t\t\t}: [],\r\n\t\t\t\t\tmnNumber: data.mnNumber,\r\n\t\t\t\t\tlongitude: data.latitude,\r\n\t\t\t\t\tlatitude: data.longitude,\r\n\t\t\t\t\tfactorList: data.factorList.map(item => {\r\n\t\t\t\t\t\treturn JSON.stringify(item)\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 提交\r\n\t\t\thandleOk(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.form.validateFields((err, values) => {\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tthis.confirmLoading = true\r\n\r\n\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\tid: values.id,\r\n\t\t\t\t\t\t\tcompanyID: values.companyID.key,\r\n\t\t\t\t\t\t\tcompanyName: values.companyID.label,\r\n\t\t\t\t\t\t\tholeName: values.holeName,\r\n\t\t\t\t\t\t\tholeCode: values.holeCode,\r\n\t\t\t\t\t\t\tpointNatureID: values.pointNatureID.key,\r\n\t\t\t\t\t\t\tpointNature: values.pointNatureID.label,\r\n\t\t\t\t\t\t\tpollutedTypeID: values.pollutedTypeID.key,\r\n\t\t\t\t\t\t\tpollutedType: values.pollutedTypeID.label,\r\n\t\t\t\t\t\t\toutletNatureID: values.outletNatureID.key,\r\n\t\t\t\t\t\t\toutletNature: values.outletNatureID.label,\r\n\t\t\t\t\t\t\tmnNumber: values.mnNumber,\r\n\t\t\t\t\t\t\tfactorList: values.factorList.map(item => {\r\n\t\t\t\t\t\t\t\treturn JSON.parse(item).id\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\tfactorNames: values.factorList.map(item => {\r\n\t\t\t\t\t\t\t\treturn JSON.parse(item).factorName\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\tlongitude: values.longitude,\r\n\t\t\t\t\t\t\tlatitude: values.latitude\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this.modalTitle == '新增') {\r\n\t\t\t\t\t\t\tthis.added(data)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.edit(data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.confirmLoading = false\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tadded(data) {\r\n\t\t\t\tinsertHole(data).then(res => {\r\n\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\tthis.modalShow = false\r\n\t\t\t\t\t\tthis.reduction()\r\n\t\t\t\t\t\tthis.$message.success('添加成功', 3, this.refresh());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.confirmLoading = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tedit(data) {\r\n\t\t\t\teditHole(data).then(res => {\r\n\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\tthis.modalShow = false\r\n\t\t\t\t\t\tthis.reduction()\r\n\t\t\t\t\t\tthis.$message.success('修改成功', 3, this.refresh());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.confirmLoading = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdelBatch() {\r\n\t\t\t\tif (this.IdBatch.length) {\r\n\t\t\t\t\tthis.$confirm({\r\n\t\t\t\t\t\ttitle: '你确定要删除选择的企业排口吗？',\r\n\t\t\t\t\t\tcontent: '删除之后将不可恢复，请谨慎删除。',\r\n\t\t\t\t\t\tcentered: true,\r\n\t\t\t\t\t\tonOk: () => {\r\n\t\t\t\t\t\t\tdelCompanyHole({\r\n\t\t\t\t\t\t\t\tid: this.IdBatch\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\t\t\t\tthis.$message.success('删除成功', 3, this.refresh());\r\n\t\t\t\t\t\t\t\t\tthis.IdBatch = []\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonCancel() {\r\n\t\t\t\t\t\t\tconsole.log('Cancel')\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\treduction() {\r\n\t\t\t\tthis.form.setFieldsValue({\r\n\t\t\t\t\tcompanyID: [],\r\n\t\t\t\t\tholeName: \"\",\r\n\t\t\t\t\tholeCode: \"\",\r\n\t\t\t\t\tpointNatureID: [],\r\n\t\t\t\t\tpollutedTypeID: [],\r\n\t\t\t\t\tmnNumber: \"\",\r\n\t\t\t\t\tid: '',\r\n\t\t\t\t\tlongitude: '',\r\n\t\t\t\t\tlatitude: '',\r\n\t\t\t\t\tfactorList: []\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\trefresh() {\r\n\t\t\t\tthis.CompanyID = []\r\n\t\t\t\tthis.RegionID = null\r\n\t\t\t\tthis.MNNumber = ''\r\n\t\t\t\tthis.search()\r\n\t\t\t},\r\n\t\t\tcheckOnChange(e, checkedValues) {\r\n\t\t\t\tif (e.target.checked) {\r\n\t\t\t\t\tthis.factorNames.push(checkedValues.factorName);\r\n\t\t\t\t\tthis.factorIDs.push(checkedValues.id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.factorNames.splice(this.factorNames.indexOf(checkedValues.factorName), 1);\r\n\t\t\t\t\tthis.factorIDs.splice(this.factorIDs.indexOf(checkedValues.id), 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\ttableHeight(data) {\r\n\t\t\t\tthis.scrolly = data - 75\r\n\t\t\t},\r\n\t\t\thandleCancel() {\r\n\t\t\t\tthis.reduction()\r\n\t\t\t\tthis.modalShow = false;\r\n\t\t\t},\r\n\t\t\tcustomRow(record, index) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: index % 2 ? '#fff' : '#f0f2f5'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonSelectChange(selectedRowKeys) {\r\n\t\t\t\tthis.IdBatch = selectedRowKeys\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\trowSelection() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tonChange: (selectedRowKeys, selectedRows) => {\r\n\t\t\t\t\t\tthis.IdBatch = selectedRowKeys\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t},\r\n\t})\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"],"sourceRoot":"src/page/polSouManagement"}]}