{"remainingRequest":"D:\\Git\\yangkou-balance-management-system\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\yangkou-balance-management-system\\src\\components\\media\\videoMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\yangkou-balance-management-system\\src\\components\\media\\videoMap.vue","mtime":1622703134600},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1613790689000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.date.now\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport _toConsumableArray from \"D:\\\\Git\\\\yangkou-balance-management-system\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.array.map\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\Git\\\\yangkou-balance-management-system\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\Git\\\\yangkou-balance-management-system\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AMap from 'AMap';\nimport { videoPosition } from '@/request/api';\nexport default {\n  components: {},\n  props: {},\n  data: function data() {\n    var _ref;\n\n    return _ref = {\n      visible: false,\n      active: 1,\n      title: '',\n      code: '',\n      companyId: '',\n      info: {},\n      list: [],\n      instantsHeader: [],\n      parkBalanceOne: '',\n      parkBalanceTwo: '',\n      oneNormal: 0,\n      oneAbnormal: 0,\n      twoNormal: 0,\n      twoAbnormal: 0,\n      dayAlarmNumber: 0,\n      dayProcessNumber: 0,\n      dropdownStyle: {\n        backgroundColor: '#26446f',\n        boxShadow: '0 2 px 8 px rgba(6, 144, 197, 0.15)'\n      },\n      companyList: [],\n      holeList: [],\n      company: [],\n      map: null,\n      markerList: []\n    }, _defineProperty(_ref, \"title\", '1'), _defineProperty(_ref, \"video\", ['https://hls01open.ys7.com/openlive/51943a6b61004990b3aa23b926387176.m3u8', 'https://hls01open.ys7.com/openlive/63807935311b4942a8f471737b93246f.m3u8', 'https://hls01open.ys7.com/openlive/1b8fc5bf8011466ba35a1f40fa24887f.m3u8', 'https://hls01open.ys7.com/openlive/8f0b8780b4ca4f78b9dd8ec68ef17690.m3u8']), _ref;\n  },\n  created: function created() {},\n  methods: {\n    init: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var result, companyList;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.map = new AMap.Map('map', {\n                  mapStyle: global.mapStyle,\n                  center: [121.06404, 32.541833],\n                  viewMode: '3D',\n                  pitch: 30,\n                  resizeEnable: true,\n                  zoom: 14.55,\n                  isHotspot: false\n                });\n                _context.next = 3;\n                return videoPosition({\n                  regionID: global.regionID\n                }).then(function (res) {\n                  if (res.status === '0') {\n                    return res.result;\n                  } else {\n                    console.log(res.message);\n                  }\n                });\n\n              case 3:\n                result = _context.sent;\n                console.log(result);\n                this.holeList = result;\n                companyList = result.map(function (item) {\n                  return item.companyName;\n                });\n                this.companyList = _toConsumableArray(new Set(companyList));\n                result.forEach(function (item) {\n                  item.icon = require(\"../../../static/icon/video-icon.png\");\n                  item.position = new AMap.LngLat(item.longitude, item.latitude);\n                  item.title = item.companyName + '：' + item.monitorName;\n                  var marker = new AMap.Marker(item);\n\n                  _this.markerList.push(marker);\n                });\n                this.map.add(this.markerList);\n                this.markerList.forEach(function (item, index) {\n                  AMap.event.addListener(item, 'click', function () {\n                    console.log(item);\n                    _this.visible = true;\n                    _this.title = item.w.companyName + '-' + item.w.monitorName;\n\n                    _this.$nextTick(function () {\n                      var player = new Aliplayer({\n                        \"id\": \"player-con\",\n                        \"source\": _this.video[index],\n                        \"width\": \"100%\",\n                        \"height\": \"800px\",\n                        \"autoplay\": true,\n                        \"isLive\": true,\n                        \"rePlay\": false,\n                        \"playsinline\": true,\n                        \"preload\": true,\n                        \"controlBarVisibility\": \"hover\",\n                        \"useH5Prism\": true,\n                        \"extraInfo\": {\n                          \"crossOrigin\": \"anonymous\"\n                        },\n                        \"skinLayout\": [{\n                          \"name\": \"bigPlayButton\",\n                          \"align\": \"blabs\",\n                          \"x\": 30,\n                          \"y\": 80\n                        }, {\n                          \"name\": \"errorDisplay\",\n                          \"align\": \"tlabs\",\n                          \"x\": 0,\n                          \"y\": 0\n                        }, {\n                          \"name\": \"infoDisplay\"\n                        }, {\n                          \"name\": \"controlBar\",\n                          \"align\": \"blabs\",\n                          \"x\": 0,\n                          \"y\": 0,\n                          \"children\": [{\n                            \"name\": \"liveDisplay\",\n                            \"align\": \"tlabs\",\n                            \"x\": 15,\n                            \"y\": 6\n                          }, {\n                            \"name\": \"fullScreenButton\",\n                            \"align\": \"tr\",\n                            \"x\": 10,\n                            \"y\": 10\n                          }, {\n                            \"name\": \"volume\",\n                            \"align\": \"tr\",\n                            \"x\": 5,\n                            \"y\": 10\n                          }, {\n                            \"name\": \"snapshot\",\n                            \"align\": \"tr\",\n                            \"x\": 10,\n                            \"y\": 12\n                          }]\n                        }]\n                      }, function (player) {\n                        console.log(\"The player is created\");\n                      });\n                      /* h5截图按钮, 截图成功回调 */\n\n                      player.on('snapshoted', function (data) {\n                        var pictureData = data.paramData.base64;\n                        var downloadElement = document.createElement('a');\n                        downloadElement.setAttribute('href', pictureData);\n                        var fileName = 'Aliplayer' + Date.now() + '.png';\n                        downloadElement.setAttribute('download', fileName);\n                        downloadElement.click();\n                        pictureData = null;\n                      });\n                    });\n                  });\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }(),\n    filterOption: function filterOption(input, option) {\n      return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n    },\n    handleChange: function handleChange(value) {\n      var _this2 = this;\n\n      console.log(value);\n      this.markerList.forEach(function (item) {\n        console.log(item);\n\n        if (item.Ce.companyName == value) {\n          item.show();\n        } else {\n          item.hide();\n        }\n\n        _this2.map.setFitView(null, true);\n      });\n    },\n    onCancel: function onCancel() {}\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",{"version":3,"sources":["videoMap.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"components-media-container\" id=\"map\">\r\n\t\t<div class=\"componets-map-search\">\r\n\t\t\t<a-select v-model=\"company\" show-search placeholder=\"输入名称\" option-filter-prop=\"children\" style=\"width: 100%\"\r\n\t\t\t\t:dropdownStyle=\"dropdownStyle\" :filter-option=\"filterOption\" @change=\"handleChange\">\r\n\t\t\t\t<a-select-option class=\"media-search-option\" :value=\"item\" v-for=\"(item,index) in companyList\"\r\n\t\t\t\t\t:key=\"index\">{{item}}</a-select-option>\r\n\t\t\t</a-select>\r\n\t\t</div>\r\n\t\t<div class=\"components-park-state\">\r\n\t\t\t<div class=\"cell\">视频监控点位</div>\r\n\t\t</div>\r\n\t\t<div class=\"components-park-mark\">\r\n\t\t\t<div class=\"cell\">\r\n\t\t\t\t<img src=\"../../../static/icon/video-icon.png\" alt=\"\">\r\n\t\t\t\t视频监控点\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<a-modal dialogClass=\"media-modal-dialog\" v-model=\"visible\" :title=\"title\" :width=\"1600\" centered :footer=\"null\"\r\n\t\t\tdestroyOnClose @cancel=\"onCancel\">\r\n\t\t\t<div class=\"prism-player\" id=\"player-con\"></div>\r\n\t\t</a-modal>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport AMap from 'AMap'\r\n\r\n\timport {\r\n\t\tvideoPosition\r\n\t} from '@/request/api'\r\n\r\n\texport default ({\r\n\t\tcomponents: {},\r\n\t\tprops: {},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tactive: 1,\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tcode: '',\r\n\t\t\t\tcompanyId: '',\r\n\t\t\t\tinfo: {},\r\n\t\t\t\tlist: [],\r\n\t\t\t\tinstantsHeader: [],\r\n\t\t\t\tparkBalanceOne: '',\r\n\t\t\t\tparkBalanceTwo: '',\r\n\t\t\t\toneNormal: 0,\r\n\t\t\t\toneAbnormal: 0,\r\n\t\t\t\ttwoNormal: 0,\r\n\t\t\t\ttwoAbnormal: 0,\r\n\t\t\t\tdayAlarmNumber: 0,\r\n\t\t\t\tdayProcessNumber: 0,\r\n\t\t\t\tdropdownStyle: {\r\n\t\t\t\t\tbackgroundColor: '#26446f',\r\n\t\t\t\t\tboxShadow: '0 2 px 8 px rgba(6, 144, 197, 0.15)'\r\n\t\t\t\t},\r\n\t\t\t\tcompanyList: [],\r\n\t\t\t\tholeList: [],\r\n\t\t\t\tcompany: [],\r\n\t\t\t\tmap: null,\r\n\t\t\t\tmarkerList: [],\r\n\t\t\t\ttitle: '1',\r\n\t\t\t\tvideo: ['https://hls01open.ys7.com/openlive/51943a6b61004990b3aa23b926387176.m3u8',\r\n\t\t\t\t\t'https://hls01open.ys7.com/openlive/63807935311b4942a8f471737b93246f.m3u8',\r\n\t\t\t\t\t'https://hls01open.ys7.com/openlive/1b8fc5bf8011466ba35a1f40fa24887f.m3u8',\r\n\t\t\t\t\t'https://hls01open.ys7.com/openlive/8f0b8780b4ca4f78b9dd8ec68ef17690.m3u8'\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tmethods: {\r\n\t\t\tasync init() {\r\n\t\t\t\tthis.map = new AMap.Map('map', {\r\n\t\t\t\t\tmapStyle: global.mapStyle,\r\n\t\t\t\t\tcenter: [121.06404, 32.541833],\r\n\t\t\t\t\tviewMode: '3D',\r\n\t\t\t\t\tpitch: 30,\r\n\t\t\t\t\tresizeEnable: true,\r\n\t\t\t\t\tzoom: 14.55,\r\n\t\t\t\t\tisHotspot: false\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconst result = await videoPosition({\r\n\t\t\t\t\tregionID: global.regionID,\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\treturn res.result\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconsole.log(result)\r\n\r\n\t\t\t\tthis.holeList = result\r\n\t\t\t\tconst companyList = result.map(item => item.companyName)\r\n\t\t\t\tthis.companyList = [...new Set(companyList)]\r\n\r\n\t\t\t\tresult.forEach(item => {\r\n\t\t\t\t\titem.icon = require('../../../static/icon/video-icon.png')\r\n\t\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\r\n\t\t\t\t\titem.title = item.companyName + '：' + item.monitorName\r\n\t\t\t\t\tconst marker = new AMap.Marker(item);\r\n\t\t\t\t\tthis.markerList.push(marker)\r\n\t\t\t\t})\r\n\r\n\r\n\t\t\t\tthis.map.add(this.markerList)\r\n\r\n\t\t\t\tthis.markerList.forEach((item, index) => {\r\n\t\t\t\t\tAMap.event.addListener(item, 'click', () => {\r\n\t\t\t\t\t\tconsole.log(item)\r\n\t\t\t\t\t\tthis.visible = true\r\n\t\t\t\t\t\tthis.title = item.w.companyName + '-' + item.w.monitorName\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tvar player = new Aliplayer({\r\n\t\t\t\t\t\t\t\t\"id\": \"player-con\",\r\n\t\t\t\t\t\t\t\t\"source\": this.video[index],\r\n\t\t\t\t\t\t\t\t\"width\": \"100%\",\r\n\t\t\t\t\t\t\t\t\"height\": \"800px\",\r\n\t\t\t\t\t\t\t\t\"autoplay\": true,\r\n\t\t\t\t\t\t\t\t\"isLive\": true,\r\n\t\t\t\t\t\t\t\t\"rePlay\": false,\r\n\t\t\t\t\t\t\t\t\"playsinline\": true,\r\n\t\t\t\t\t\t\t\t\"preload\": true,\r\n\t\t\t\t\t\t\t\t\"controlBarVisibility\": \"hover\",\r\n\t\t\t\t\t\t\t\t\"useH5Prism\": true,\r\n\t\t\t\t\t\t\t\t\"extraInfo\": {\r\n\t\t\t\t\t\t\t\t\t\"crossOrigin\": \"anonymous\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\"skinLayout\": [{\r\n\t\t\t\t\t\t\t\t\t\t\"name\": \"bigPlayButton\",\r\n\t\t\t\t\t\t\t\t\t\t\"align\": \"blabs\",\r\n\t\t\t\t\t\t\t\t\t\t\"x\": 30,\r\n\t\t\t\t\t\t\t\t\t\t\"y\": 80\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"name\": \"errorDisplay\",\r\n\t\t\t\t\t\t\t\t\t\t\"align\": \"tlabs\",\r\n\t\t\t\t\t\t\t\t\t\t\"x\": 0,\r\n\t\t\t\t\t\t\t\t\t\t\"y\": 0\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"name\": \"infoDisplay\"\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\"name\": \"controlBar\",\r\n\t\t\t\t\t\t\t\t\t\t\"align\": \"blabs\",\r\n\t\t\t\t\t\t\t\t\t\t\"x\": 0,\r\n\t\t\t\t\t\t\t\t\t\t\"y\": 0,\r\n\t\t\t\t\t\t\t\t\t\t\"children\": [{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"name\": \"liveDisplay\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"align\": \"tlabs\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"x\": 15,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"y\": 6\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"name\": \"fullScreenButton\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"align\": \"tr\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"x\": 10,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"y\": 10\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"name\": \"volume\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"align\": \"tr\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"x\": 5,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"y\": 10\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"name\": \"snapshot\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"align\": \"tr\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"x\": 10,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"y\": 12\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t}, function(player) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"The player is created\");\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t/* h5截图按钮, 截图成功回调 */\r\n\t\t\t\t\t\t\tplayer.on('snapshoted', function(data) {\r\n\t\t\t\t\t\t\t\tvar pictureData = data.paramData.base64\r\n\t\t\t\t\t\t\t\tvar downloadElement = document.createElement('a')\r\n\t\t\t\t\t\t\t\tdownloadElement.setAttribute('href', pictureData)\r\n\t\t\t\t\t\t\t\tvar fileName = 'Aliplayer' + Date.now() + '.png'\r\n\t\t\t\t\t\t\t\tdownloadElement.setAttribute('download', fileName)\r\n\t\t\t\t\t\t\t\tdownloadElement.click()\r\n\t\t\t\t\t\t\t\tpictureData = null\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfilterOption(input, option) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\toption.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\thandleChange(value) {\r\n\t\t\t\tconsole.log(value)\r\n\r\n\t\t\t\tthis.markerList.forEach(item => {\r\n\t\t\t\t\tconsole.log(item)\r\n\t\t\t\t\tif (item.Ce.companyName == value) {\r\n\t\t\t\t\t\titem.show()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.hide()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.map.setFitView(null, true)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonCancel() {}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.init()\r\n\t\t}\r\n\t})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\t.components-media-container {\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.media-modal-tabbs {\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.media-modal-body {\r\n\t\theight: 520px;\r\n\t}\r\n\r\n\t.media-modal-form {\r\n\t\tpadding: 0 10px;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.media-modal-cell {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 50%;\r\n\t\theight: 40px;\r\n\t\tline-height: 40px;\r\n\t\tborder-bottom: 1px dashed #fff;\r\n\t}\r\n\r\n\t.media-modal-table {\r\n\t\ttext-align: initial;\r\n\r\n\t\t// overflow-x: scroll;\r\n\t\t.body {\r\n\t\t\theight: auto;\r\n\t\t}\r\n\r\n\t\t.header {\r\n\t\t\t// min-width: 100%;\r\n\t\t\t// white-space: nowrap;\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\t.th {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\theight: 35px;\r\n\t\t\t\tline-height: 35px;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.row {\r\n\t\t\t// min-width: 100%;\r\n\t\t\t// white-space: nowrap;\r\n\t\t\tborder: 0;\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\t.td {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\theight: 30px;\r\n\t\t\t\tline-height: 30px;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.components-park-state {\r\n\t\tposition: absolute;\r\n\t\ttop: 15px;\r\n\t\twidth: 355px;\r\n\t\theight: 40px;\r\n\t\tbackground: url(../../../static/image/state.png) no-repeat center center / 100% 100%;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tmargin: 0 auto;\r\n\t\tpadding: 0 15px;\r\n\t\tz-index: 100;\r\n\t\tcursor: default;\r\n\r\n\t\t.cell {\r\n\t\t\theight: calc(100% / 4);\r\n\t\t\tline-height: 40px;\r\n\t\t\tcolor: #00e8ff;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t}\r\n\r\n\t.componets-map-search {\r\n\t\tposition: absolute;\r\n\t\tleft: 535px;\r\n\t\ttop: 15px;\r\n\t\twidth: 220px;\r\n\t\tz-index: 100;\r\n\r\n\t\t.message {\r\n\t\t\tcolor: #06dfff;\r\n\t\t\tline-height: 25px;\r\n\t\t}\r\n\t}\r\n\r\n\t.components-park-mark {\r\n\t\tposition: absolute;\r\n\t\ttop: 15px;\r\n\t\twidth: 200px;\r\n\t\tborder-radius: 10px;\r\n\t\tborder: 2px dashed #0dbbe7;\r\n\t\tz-index: 100;\r\n\t\tright: 530px;\r\n\r\n\t\t.cell {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\theight: 50px;\r\n\t\t\tcolor: #00e8ff;\r\n\t\t\tpadding: 0 30px 0 20px;\r\n\r\n\t\t\t&>img {\r\n\t\t\t\tmargin-right: 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n<style lang=\"less\">\r\n\t.componets-map-search {\r\n\r\n\t\t.ant-select,\r\n\t\t.ant-select-arrow {\r\n\t\t\tcolor: #fff\r\n\t\t}\r\n\r\n\t\t.ant-select-selection {\r\n\t\t\tbackground: #154279 url(../../../static/icon/search-icon.png) no-repeat 5px center / 20px auto;\r\n\t\t\tborder-color: #0690c5;\r\n\t\t}\r\n\r\n\t\t.ant-select-selection__rendered {\r\n\t\t\tmargin-left: 30px;\r\n\t\t}\r\n\t}\r\n\r\n\t.media-search-option {\r\n\t\tbackground-color: #26446f;\r\n\t\tcolor: #fff;\r\n\r\n\t\t&.ant-select-dropdown-menu-item-active:not(.ant-select-dropdown-menu-item-disabled),\r\n\t\t&.ant-select-dropdown-menu-item:hover:not(.ant-select-dropdown-menu-item-disabled) {\r\n\t\t\tbackground-color: #0465b5;\r\n\t\t}\r\n\t}\r\n</style>\n"],"sourceRoot":"src/components/media"}]}