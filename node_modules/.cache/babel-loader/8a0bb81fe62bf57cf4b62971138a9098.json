{"remainingRequest":"D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\yangkou-balance-management-system\\src\\page\\login-1.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\yangkou-balance-management-system\\src\\page\\login-1.vue","mtime":1613567049988},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1613790689000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar sha1 = require('sha1');\n\nimport { apiLogin, getTokenApi, getRegionName } from '@/request/api';\nexport default {\n  data: function data() {\n    return {};\n  },\n  beforeCreate: function beforeCreate() {\n    this.form = this.$form.createForm(this, {\n      name: 'normal_login'\n    });\n  },\n  created: function created() {// getTokenApi({\n    // \t\"ClientId\": \"client\",\n    // \t\"ClientSecret\": \"123456\",\n    // \t\"Scope\": \"SWSApi\"\n    // }).then(res => {\n    // \tconsole.log(res)\n    // })\n  },\n  methods: {\n    handleSubmit: function handleSubmit(e) {\n      var _this = this;\n\n      e.preventDefault();\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          console.log('Received values of form: ', values);\n\n          _this.$message.loading({\n            content: '登录中...',\n            key: 'loading'\n          });\n\n          values.Password = sha1(values.Password).toUpperCase();\n          localStorage.setItem('token', '');\n          var data = {\n            UserName: values.UserName,\n            Password: values.Password\n          };\n          console.log(data);\n          apiLogin(data).then(function (res) {\n            console.log(res);\n\n            if (res.status == 0) {\n              localStorage.setItem('token', res.result.token);\n              console.log(JSON.stringify(res.result.regoins));\n              localStorage.setItem('regoins', JSON.stringify(res.result.regoins));\n              global.regoins = JSON.parse(localStorage.getItem('regoins'));\n              console.log(localStorage.getItem('regoins'));\n\n              _this.$message.success({\n                content: res.message,\n                key: 'loading',\n                duration: 1,\n                onClose: function onClose() {\n                  console.log(_this.$route.query.redirect);\n\n                  _this.$router.push(_this.$route.query.redirect);\n                }\n              });\n            } else {\n              _this.$message.error({\n                content: res.message,\n                key: 'loading',\n                duration: 1\n              });\n            }\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["login-1.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,IAAA,IAAA,GAAA,OAAA,CAAA,MAAA,CAAA;;AAEA,SACA,QADA,EAEA,WAFA,EAGA,aAHA,QAIA,eAJA;AAMA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA,EAAA;AACA,GAHA;AAIA,EAAA,YAJA,0BAIA;AACA,SAAA,IAAA,GAAA,KAAA,KAAA,CAAA,UAAA,CAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KAAA,CAAA;AAGA,GARA;AASA,EAAA,OATA,qBASA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,CADA,EACA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA,WAAA,IAAA,CAAA,cAAA,CAAA,UAAA,GAAA,EAAA,MAAA,EAAA;AACA,YAAA,CAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,2BAAA,EAAA,MAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AACA,YAAA,OAAA,EAAA,QADA;AAEA,YAAA,GAAA,EAAA;AAFA,WAAA;;AAIA,UAAA,MAAA,CAAA,QAAA,GAAA,IAAA,CAAA,MAAA,CAAA,QAAA,CAAA,CAAA,WAAA,EAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,EAAA;AACA,cAAA,IAAA,GAAA;AACA,YAAA,QAAA,EAAA,MAAA,CAAA,QADA;AAEA,YAAA,QAAA,EAAA,MAAA,CAAA;AAFA,WAAA;AAIA,UAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,UAAA,QAAA,CAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,gBAAA,GAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,cAAA,YAAA,CAAA,OAAA,CAAA,OAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AACA,cAAA,YAAA,CAAA,OAAA,CAAA,SAAA,EAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AACA,cAAA,MAAA,CAAA,OAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,YAAA,CAAA,OAAA,CAAA,SAAA,CAAA;;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AACA,gBAAA,OAAA,EAAA,GAAA,CAAA,OADA;AAEA,gBAAA,GAAA,EAAA,SAFA;AAGA,gBAAA,QAAA,EAAA,CAHA;AAIA,gBAAA,OAAA,EAAA,mBAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,QAAA;;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,QAAA;AACA;AAPA,eAAA;AASA,aAfA,MAeA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA;AACA,gBAAA,OAAA,EAAA,GAAA,CAAA,OADA;AAEA,gBAAA,GAAA,EAAA,SAFA;AAGA,gBAAA,QAAA,EAAA;AAHA,eAAA;AAKA;AACA,WAxBA;AAyBA;AACA,OAxCA;AAyCA;AA5CA;AAlBA,CAAA","sourcesContent":["<template>\r\n\t<a-form :form=\"form\" class=\"login-form\" @submit=\"handleSubmit\">\r\n\t\t<a-form-item>\r\n\t\t\t<a-input v-decorator=\"[\r\n\t          'UserName',\r\n\t          { rules: [{ required: true, message: 'Please input your username!' }] },\r\n\t        ]\"\r\n\t\t\t placeholder=\"Username\">\r\n\t\t\t\t<a-icon slot=\"prefix\" type=\"user\" style=\"color: rgba(0,0,0,.25)\" />\r\n\t\t\t</a-input>\r\n\t\t</a-form-item>\r\n\t\t<a-form-item>\r\n\t\t\t<a-input v-decorator=\"[\r\n\t          'Password',\r\n\t          { rules: [{ required: true, message: 'Please input your Password!' }] },\r\n\t        ]\"\r\n\t\t\t type=\"password\" placeholder=\"Password\">\r\n\t\t\t\t<a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0,0,0,.25)\" />\r\n\t\t\t</a-input>\r\n\t\t</a-form-item>\r\n\t\t<a-form-item>\r\n\t\t\t<a-checkbox v-decorator=\"[\r\n\t          'remember',\r\n\t          {\r\n\t            valuePropName: 'checked',\r\n\t            initialValue: true,\r\n\t          },\r\n\t        ]\">\r\n\t\t\t\tRemember me\r\n\t\t\t</a-checkbox>\r\n\t\t\t<a class=\"login-form-forgot\" href=\"\">\r\n\t\t\t\tForgot password\r\n\t\t\t</a>\r\n\t\t\t<a-button type=\"primary\" html-type=\"submit\" class=\"login-form-button\">\r\n\t\t\t\tLogin\r\n\t\t\t</a-button>\r\n\t\t</a-form-item>\r\n\t</a-form>\r\n</template>\r\n<script>\r\n\tlet sha1 = require('sha1')\r\n\r\n\timport {\r\n\t\tapiLogin,\r\n\t\tgetTokenApi,\r\n\t\tgetRegionName\r\n\t} from '@/request/api'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {};\r\n\t\t},\r\n\t\tbeforeCreate() {\r\n\t\t\tthis.form = this.$form.createForm(this, {\r\n\t\t\t\tname: 'normal_login'\r\n\t\t\t});\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// getTokenApi({\r\n\t\t\t// \t\"ClientId\": \"client\",\r\n\t\t\t// \t\"ClientSecret\": \"123456\",\r\n\t\t\t// \t\"Scope\": \"SWSApi\"\r\n\t\t\t// }).then(res => {\r\n\t\t\t// \tconsole.log(res)\r\n\t\t\t// })\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleSubmit(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.form.validateFields((err, values) => {\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tconsole.log('Received values of form: ', values);\r\n\t\t\t\t\t\tthis.$message.loading({\r\n\t\t\t\t\t\t\tcontent: '登录中...',\r\n\t\t\t\t\t\t\tkey: 'loading'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tvalues.Password = sha1(values.Password).toUpperCase()\r\n\t\t\t\t\t\tlocalStorage.setItem('token', '')\r\n\t\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\t\tUserName: values.UserName,\r\n\t\t\t\t\t\t\tPassword: values.Password\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t\tapiLogin(data).then(res => {\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\tif (res.status == 0) {\r\n\t\t\t\t\t\t\t\tlocalStorage.setItem('token', res.result.token)\r\n\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(res.result.regoins))\r\n\t\t\t\t\t\t\t\tlocalStorage.setItem('regoins', JSON.stringify(res.result.regoins))\r\n\t\t\t\t\t\t\t\tglobal.regoins = JSON.parse(localStorage.getItem('regoins'))\r\n\t\t\t\t\t\t\t\tconsole.log(localStorage.getItem('regoins'))\r\n\t\t\t\t\t\t\t\tthis.$message.success({\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tkey: 'loading',\r\n\t\t\t\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(this.$route.query.redirect)\r\n\t\t\t\t\t\t\t\t\t\tthis.$router.push(this.$route.query.redirect)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message.error({\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tkey: 'loading',\r\n\t\t\t\t\t\t\t\t\tduration: 1\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\n"],"sourceRoot":"src/page"}]}