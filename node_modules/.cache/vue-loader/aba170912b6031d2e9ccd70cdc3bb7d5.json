{"remainingRequest":"E:\\尚维斯\\水环境管理系统HTML\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\尚维斯\\水环境管理系统HTML\\yangkou-balance-management-system\\src\\page\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\尚维斯\\水环境管理系统HTML\\yangkou-balance-management-system\\src\\page\\login.vue","mtime":1613625912365},{"path":"E:\\尚维斯\\水环境管理系统HTML\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1612248228397},{"path":"E:\\尚维斯\\水环境管理系统HTML\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1612248228116},{"path":"E:\\尚维斯\\水环境管理系统HTML\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1612248228397},{"path":"E:\\尚维斯\\水环境管理系统HTML\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1612248234213}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet sha1 = require('sha1')\n\nimport {\n\tapiLogin,\n\tgetTokenApi,\n\tgetRegionName\n} from '@/request/api'\n\nexport default {\n\tdata() {\n\t\treturn {};\n\t},\n\tbeforeCreate() {\n\t\tthis.form = this.$form.createForm(this, {\n\t\t\tname: 'normal_login'\n\t\t});\n\t},\n\tcreated() {\n\t},\n\tmethods: {\n\t\thandleSubmit(e) {\n\t\t\te.preventDefault();\n\t\t\tthis.form.validateFields((err, values) => {\n\t\t\t\tif (!err) {\n\t\t\t\t\tconsole.log('Received values of form: ', values);\n\t\t\t\t\tthis.$message.loading({\n\t\t\t\t\t\tcontent: '登录中...',\n\t\t\t\t\t\tkey: 'loading'\n\t\t\t\t\t})\n\t\t\t\t\tvalues.Password = sha1(values.Password).toUpperCase()\n\t\t\t\t\tlocalStorage.setItem('token', '')\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\tUserName: values.UserName,\n\t\t\t\t\t\tPassword: values.Password\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(data)\n\t\t\t\t\tapiLogin(data).then(res => {\n\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\tif (res.status == 0) {\n\t\t\t\t\t\t\tlocalStorage.setItem('token', res.result.token)\n\t\t\t\t\t\t\tconsole.log(JSON.stringify(res.result.regoins))\n\t\t\t\t\t\t\tlocalStorage.setItem('regoins', JSON.stringify(res.result.regoins))\n\t\t\t\t\t\t\tglobal.regoins = JSON.parse(localStorage.getItem('regoins'))\n\t\t\t\t\t\t\tconsole.log(localStorage.getItem('regoins'))\n\t\t\t\t\t\t\tthis.$message.success({\n\t\t\t\t\t\t\t\tcontent: res.message,\n\t\t\t\t\t\t\t\tkey: 'loading',\n\t\t\t\t\t\t\t\tduration: 1,\n\t\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\t\tconsole.log(this.$route.query.redirect)\n\t\t\t\t\t\t\t\t\tthis.$router.push(this.$route.query.redirect)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$message.error({\n\t\t\t\t\t\t\t\tcontent: res.message,\n\t\t\t\t\t\t\t\tkey: 'loading',\n\t\t\t\t\t\t\t\tduration: 1\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t},\n};\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/page","sourcesContent":["<template>\r\n\t<div class=\"login-mode\">\r\n\t\t<div class=\"login-title\">洋口园区水环境管理系统</div>\r\n\t\t<div class=\"login-title-line\"></div>\r\n\t\t<div class=\"login-con\">\r\n\t\t\t<div class=\"login-map\"></div>\r\n\t\t\t<div class=\"login-form\">\r\n\t\t\t\t<a-form :form=\"form\" @submit=\"handleSubmit\">\r\n\t\t\t\t\t<a-form-item>\r\n\t\t\t\t\t\t<div class=\"login-input\">\r\n\t\t\t\t\t\t\t<label class=\"login-label user\"></label>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<a-input v-decorator=\"['UserName',{ rules: [{ required: true, message: 'Please input your username!' }] },]\"\r\n\t\t\t\t\t\t\t\t placeholder=\"用户名\">\r\n\t\t\t\t\t\t\t\t</a-input>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t<a-form-item>\r\n\t\t\t\t\t\t<div class=\"login-input\">\r\n\t\t\t\t\t\t\t<label class=\"login-label pass\"></label>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<a-input v-decorator=\"[ 'Password', { rules: [{ required: true, message: 'Please input your Password!' }] },]\"\r\n\t\t\t\t\t\t\t\t type=\"password\" placeholder=\"密码\">\r\n\t\t\t\t\t\t\t\t</a-input>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</a-form-item>\r\n\t\t\t\t\t<div class=\"login-input\" style=\"margin-bottom: 8px;\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"login-remember\">\r\n\t\t\t\t\t\t<div class=\"login-remember-icon\"></div>\r\n\t\t\t\t\t\t记住密码\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<a-button type=\"primary\" html-type=\"submit\" block class=\"login-button\">\r\n\t\t\t\t\t\t登录\r\n\t\t\t\t\t</a-button>\r\n\t\t\t\t</a-form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\n\tlet sha1 = require('sha1')\r\n\r\n\timport {\r\n\t\tapiLogin,\r\n\t\tgetTokenApi,\r\n\t\tgetRegionName\r\n\t} from '@/request/api'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {};\r\n\t\t},\r\n\t\tbeforeCreate() {\r\n\t\t\tthis.form = this.$form.createForm(this, {\r\n\t\t\t\tname: 'normal_login'\r\n\t\t\t});\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleSubmit(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.form.validateFields((err, values) => {\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tconsole.log('Received values of form: ', values);\r\n\t\t\t\t\t\tthis.$message.loading({\r\n\t\t\t\t\t\t\tcontent: '登录中...',\r\n\t\t\t\t\t\t\tkey: 'loading'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tvalues.Password = sha1(values.Password).toUpperCase()\r\n\t\t\t\t\t\tlocalStorage.setItem('token', '')\r\n\t\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\t\tUserName: values.UserName,\r\n\t\t\t\t\t\t\tPassword: values.Password\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\t\tapiLogin(data).then(res => {\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\tif (res.status == 0) {\r\n\t\t\t\t\t\t\t\tlocalStorage.setItem('token', res.result.token)\r\n\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(res.result.regoins))\r\n\t\t\t\t\t\t\t\tlocalStorage.setItem('regoins', JSON.stringify(res.result.regoins))\r\n\t\t\t\t\t\t\t\tglobal.regoins = JSON.parse(localStorage.getItem('regoins'))\r\n\t\t\t\t\t\t\t\tconsole.log(localStorage.getItem('regoins'))\r\n\t\t\t\t\t\t\t\tthis.$message.success({\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tkey: 'loading',\r\n\t\t\t\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(this.$route.query.redirect)\r\n\t\t\t\t\t\t\t\t\t\tthis.$router.push(this.$route.query.redirect)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message.error({\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tkey: 'loading',\r\n\t\t\t\t\t\t\t\t\tduration: 1\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.login-mode {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: url(../../static/image/login-bg.png) no-repeat 0 0 / 100% 100%;\r\n\t\tpadding-top: 54px;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.login-title {\r\n\t\twidth: 750px;\r\n\t\tfont-size: 37px;\r\n\t\tfont-weight: normal;\r\n\t\tfont-stretch: normal;\r\n\t\tletter-spacing: 0px;\r\n\t\tcolor: #00eaff;\r\n\t\ttext-align: center;\r\n\t\ttext-shadow: 0 0 9px #00eaff;\r\n\t\tline-height: 1;\r\n\t\tmargin: 0 auto 15px;\r\n\t\t;\r\n\t}\r\n\r\n\t.login-title-line {\r\n\t\twidth: 459px;\r\n\t\theight: 21px;\r\n\t\tmargin: 0 auto;\r\n\t\tbackground: url(../../static/image/login-title-line.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.login-con {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\twidth: 1430px;\r\n\t\tmargin: auto;\r\n\t\theight: 655px;\r\n\t}\r\n\r\n\t.login-map {\r\n\t\tposition: absolute;\r\n\t\twidth: 650px;\r\n\t\theight: 655px;\r\n\t\tbackground: url(../../static/image/login-map.png) no-repeat 0 0 / 100% 100%;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t}\r\n\r\n\t.login-form {\r\n\t\twidth: 425px;\r\n\t\theight: 385px;\r\n\t\tbackground: url(../../static/image/login-box.png) no-repeat 0 0 / 100% 100%;\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t\ttop: 43px;\r\n\t\tpadding: 40px 55px 0 70px;\r\n\t}\r\n\r\n\t.login-input {\r\n\t\tdisplay: flex;\r\n\t\theight: 43px;\r\n\t\tbackground: url(../../static/image/login-input-bg.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.login-input label {\r\n\t\tdisplay: block;\r\n\t\twidth: 50px;\r\n\t}\r\n\r\n\t.login-input>div {\r\n\t\tflex: 1;\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.login-input>div>input {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tline-height: 23px;\r\n\t\tbackground-color: transparent;\r\n\t\tborder: 0;\r\n\t\toutline: 0;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.login-label.user {\r\n\t\tbackground: url(../../static/image/login-icon-user.png) no-repeat center center / 30px 30px;\r\n\t}\r\n\r\n\t.login-label.pass {\r\n\t\tbackground: url(../../static/image/login-icon-pass.png) no-repeat center center / 30px 30px;\r\n\t}\r\n\r\n\t.login-remember {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-end;\r\n\t\tfont-size: 15px;\r\n\t\tfont-weight: normal;\r\n\t\tfont-stretch: normal;\r\n\t\tletter-spacing: 0px;\r\n\t\tcolor: #00eaff;\r\n\t\tline-height: 1;\r\n\t}\r\n\r\n\t.login-remember-icon {\r\n\t\twidth: 15px;\r\n\t\theight: 16px;\r\n\t\tbackground: url(../../static/image/login-checked-0.png) no-repeat 0 0 / 100% 100%;\r\n\t\tmargin: 0 4px 3px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.login-button {\r\n\t\theight: 43px;\r\n\t\tbackground: url(../../static/image/login-button-bg.png) no-repeat 0 0 / 100% 100%;\r\n\t\ttext-align: center;\r\n\t\tline-height: 43px;\r\n\t\tfont-size: 22px;\r\n\t\tcolor: #010a16;\r\n\t\tcursor: pointer;\r\n\t\tmargin-top: 8px;\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.login-input .ant-input {\r\n\t\tpadding: 0;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.login-form .ant-form-item{\r\n\t\tmargin-bottom: 35px;\r\n\t}\r\n\t\r\n\t.login-form .ant-form-item-with-help{\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\t\r\n</style>\r\n\r\n<style>\r\n\t.login-form .ant-form-explain{\r\n\t\tmin-height: 30px;\r\n\t\tmargin-top: 0;\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n</style>\r\n"]}]}