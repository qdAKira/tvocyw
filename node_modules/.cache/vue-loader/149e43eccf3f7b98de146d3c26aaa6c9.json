{"remainingRequest":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\yangkou-balance-management-system\\src\\components\\media\\map.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\yangkou-balance-management-system\\src\\components\\media\\map.vue","mtime":1616567762635},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1613790689000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport AMap from 'AMap'\n\nimport {\n\tgetParkData,\n\tgetSignDetial,\n\tgetWarning\n} from '@/request/api'\n\nexport default ({\n\tprops: {},\n\tdata() {\n\t\treturn {\n\t\t\tvisible: false,\n\t\t\tactive: 0,\n\t\t\ttitle: '',\n\t\t\tcode: '',\n\t\t\tinfo: {},\n\t\t\tlist: [],\n\t\t\tinstantsHeader: []\n\t\t}\n\t},\n\tcreated() {},\n\tmethods: {\n\t\tasync init() {\n\t\t\tlet map = new AMap.Map('map', {\n\t\t\t\tmapStyle: 'amap://styles/4f2d133183bd13fa27015e0fad2e320c',\n\t\t\t\tcenter: [121.06404, 32.541833],\n\t\t\t\tviewMode: '3D',\n\t\t\t\tpitch: 30,\n\t\t\t\tresizeEnable: true,\n\t\t\t\tzoom: 14.55,\n\t\t\t\tisHotspot: false\n\t\t\t})\n\n\t\t\tconst result = await getParkData({\n\t\t\t\tregionID: global.regionID,\n\t\t\t}).then(res => {\n\t\t\t\tif (res.status === '0') {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\treturn res.result\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res.message)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tconst companyList = result.companyList\n\t\t\tconst fuBiaoList = result.fuBiaoList\n\t\t\tconst wellList = result.wellList\n\t\t\tconst parkExportList = result.parkExportList\n\t\t\tconst parkIncomeList = result.parkIncomeList\n\n\t\t\tlet markerList = []\n\n\t\t\tcompanyList.forEach(item => {\n\t\t\t\titem.icon = require('../../../static/icon/mark_icon_1.png')\n\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\n\t\t\t\titem.title = item.name\n\t\t\t\tconst marker = new AMap.Marker(item);\n\t\t\t\tmarkerList.push(marker)\n\t\t\t})\n\n\t\t\tfuBiaoList.forEach(item => {\n\t\t\t\titem.icon = require('../../../static/icon/mark_icon_2.png')\n\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\n\t\t\t\titem.title = item.name\n\t\t\t\tconst marker = new AMap.Marker(item);\n\t\t\t\tmarkerList.push(marker)\n\t\t\t})\n\n\t\t\twellList.forEach(item => {\n\t\t\t\titem.icon = require('../../../static/icon/mark_icon_3.png')\n\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\n\t\t\t\titem.title = item.name\n\t\t\t\tconst marker = new AMap.Marker(item);\n\t\t\t\tmarkerList.push(marker)\n\t\t\t})\n\n\t\t\tparkExportList.forEach(item => {\n\t\t\t\titem.icon = require('../../../static/icon/mark_icon_4.png')\n\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\n\t\t\t\titem.title = item.name\n\t\t\t\tconst marker = new AMap.Marker(item);\n\t\t\t\tmarkerList.push(marker)\n\t\t\t})\n\n\t\t\tparkIncomeList.forEach(item => {\n\t\t\t\titem.icon = require('../../../static/icon/mark_icon_5.png')\n\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\n\t\t\t\titem.title = item.name\n\t\t\t\tconst marker = new AMap.Marker(item);\n\t\t\t\tmarkerList.push(marker)\n\t\t\t})\n\n\t\t\tmap.add(markerList)\n\n\t\t\tmap.setFitView(null, true)\n\n\t\t\tmarkerList.forEach((item, index) => {\n\n\t\t\t\tAMap.event.addListener(item, 'click', (e) => {\n\t\t\t\t\tthis.openModal(e)\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\topenModal(e) {\n\t\t\tthis.info = []\n\t\t\tthis.list = []\n\t\t\tthis.instantsHeader = []\n\t\t\tthis.visible = true\n\t\t\tconsole.log(e.target.Ce)\n\t\t\tthis.title = e.target.Ce.title\n\t\t\tthis.code = e.target.Ce.code\n\t\t\tgetSignDetial({\n\t\t\t\tid: e.target.Ce.id,\n\t\t\t\tcode: e.target.Ce.code\n\t\t\t}).then(res => {\n\t\t\t\tif (res.status === '0') {\n\t\t\t\t\tthis.info = res.result\n\t\t\t\t\tthis.list = e.target.Ce.code == 1 ? res.result.holes : res.result.wells\n\t\t\t\t\tthis.instantsHeader = e.target.Ce.code == 1 ? res.result.holes[0].instants : res.result\n\t\t\t\t\t\t.wells[0].instants\n\t\t\t\t\tconsole.log(this.list)\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res.message)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (e.target.Ce.code == 1) {\n\t\t\t\tgetWarning({\n\t\t\t\t\tid: e.target.Ce.id,\n\t\t\t\t}).then(res => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tif (res.status === '0') {} else {\n\t\t\t\t\t\tconsole.log(res.message)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.init()\n\t}\n})\n",{"version":3,"sources":["map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"map.vue","sourceRoot":"src/components/media","sourcesContent":["<template>\r\n\t<div class=\"components-media-container\" id=\"map\">\r\n\t\t<a-modal dialogClass=\"media-modal-dialog\" v-model=\"visible\" :title=\"title\" :width=\"1000\" centered\r\n\t\t\t:footer=\"null\">\r\n\t\t\t<div class=\"media-modal-tabbs\">\r\n\t\t\t\t<div class=\"media-modal-tab\" :style=\"{backgroundColor: active == 0 ? '#238bf3' : ''}\"\r\n\t\t\t\t\t@click=\"active = 0\">自动监测</div>\r\n\t\t\t\t<template v-if=\"code == 1\">\r\n\t\t\t\t\t<div class=\"media-modal-tab\" :style=\"{backgroundColor: active == 1 ? '#238bf3' : ''}\"\r\n\t\t\t\t\t\t@click=\"active = 1\">状态及报警处置</div>\r\n\t\t\t\t\t<div class=\"media-modal-tab\" :style=\"{backgroundColor: active == 2 ? '#238bf3' : ''}\"\r\n\t\t\t\t\t\t@click=\"active = 2\">各进出水占比</div>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"media-modal-body\" v-show=\"active == 0\">\r\n\t\t\t\t<div class=\"media-modal-form\">\r\n\t\t\t\t\t<template v-if=\"code == 1\">\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">组织机构代码：{{info.organCode}}</div>\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">企业负责人：{{info.companyResponsibleLeader}}</div>\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">行业分类：{{info.industryType}}</div>\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">负责人联系电话：{{info.companyResponsibleLeaderPhone}}</div>\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">企业地址：{{info.addressName}}</div>\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">区域：{{info.regionName}}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else-if=\"code == 2\">\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">监测点名称：{{info.wellName}}</div>\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">负责人：{{info.responsibleLeader}}</div>\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">中心经度：{{info.longitude}}</div>\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">中心纬度：{{info.latitude}}</div>\r\n\t\t\t\t\t\t<div class=\"media-modal-cell\">地址：{{info.addressName}}</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"media-modal-table\">\r\n\t\t\t\t\t<div class=\"header\">\r\n\t\t\t\t\t\t<div class=\"th\" style=\"width: 120px;\">\r\n\t\t\t\t\t\t\t{{code == 1 ? '排口名称' : '监控点名称'}}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"th\" style=\"width: 150px;\">\r\n\t\t\t\t\t\t\t实时数据时间\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"th\" style=\"max-width: 139px;\" :style=\"{flex: instantsHeader.length > 4 ? 1 : ''}\"\r\n\t\t\t\t\t\t\tv-for=\"item in instantsHeader\" :key=\"item.factorName\">\r\n\t\t\t\t\t\t\t{{item.factorName}}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"body\">\r\n\t\t\t\t\t\t<div class=\"row\" v-for=\"item in list\" :key=\"item.mainMonitorID\">\r\n\t\t\t\t\t\t\t<div class=\"td\" style=\"width: 120px;\">\r\n\t\t\t\t\t\t\t\t{{code == 1 ? item.holeName : item.wellName}}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"td\" style=\"width: 150px;\">\r\n\t\t\t\t\t\t\t\t{{item.monitorTime}}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"td\" style=\"max-width: 139px;\" :style=\"{flex: item.instants.length > 4 ? 1 : ''}\"\r\n\t\t\t\t\t\t\t\tv-for=\"ins in item.instants\" :key=\"ins.factorName\">\r\n\t\t\t\t\t\t\t\t{{ins.instantQuantity}}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"media-modal-body\" v-show=\"active == 1\"></div>\r\n\t\t\t<div class=\"media-modal-body\" v-show=\"active == 2\"></div>\r\n\t\t</a-modal>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport AMap from 'AMap'\r\n\r\n\timport {\r\n\t\tgetParkData,\r\n\t\tgetSignDetial,\r\n\t\tgetWarning\r\n\t} from '@/request/api'\r\n\r\n\texport default ({\r\n\t\tprops: {},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tactive: 0,\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tcode: '',\r\n\t\t\t\tinfo: {},\r\n\t\t\t\tlist: [],\r\n\t\t\t\tinstantsHeader: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tmethods: {\r\n\t\t\tasync init() {\r\n\t\t\t\tlet map = new AMap.Map('map', {\r\n\t\t\t\t\tmapStyle: 'amap://styles/4f2d133183bd13fa27015e0fad2e320c',\r\n\t\t\t\t\tcenter: [121.06404, 32.541833],\r\n\t\t\t\t\tviewMode: '3D',\r\n\t\t\t\t\tpitch: 30,\r\n\t\t\t\t\tresizeEnable: true,\r\n\t\t\t\t\tzoom: 14.55,\r\n\t\t\t\t\tisHotspot: false\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconst result = await getParkData({\r\n\t\t\t\t\tregionID: global.regionID,\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\treturn res.result\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconst companyList = result.companyList\r\n\t\t\t\tconst fuBiaoList = result.fuBiaoList\r\n\t\t\t\tconst wellList = result.wellList\r\n\t\t\t\tconst parkExportList = result.parkExportList\r\n\t\t\t\tconst parkIncomeList = result.parkIncomeList\r\n\r\n\t\t\t\tlet markerList = []\r\n\r\n\t\t\t\tcompanyList.forEach(item => {\r\n\t\t\t\t\titem.icon = require('../../../static/icon/mark_icon_1.png')\r\n\t\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\r\n\t\t\t\t\titem.title = item.name\r\n\t\t\t\t\tconst marker = new AMap.Marker(item);\r\n\t\t\t\t\tmarkerList.push(marker)\r\n\t\t\t\t})\r\n\r\n\t\t\t\tfuBiaoList.forEach(item => {\r\n\t\t\t\t\titem.icon = require('../../../static/icon/mark_icon_2.png')\r\n\t\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\r\n\t\t\t\t\titem.title = item.name\r\n\t\t\t\t\tconst marker = new AMap.Marker(item);\r\n\t\t\t\t\tmarkerList.push(marker)\r\n\t\t\t\t})\r\n\r\n\t\t\t\twellList.forEach(item => {\r\n\t\t\t\t\titem.icon = require('../../../static/icon/mark_icon_3.png')\r\n\t\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\r\n\t\t\t\t\titem.title = item.name\r\n\t\t\t\t\tconst marker = new AMap.Marker(item);\r\n\t\t\t\t\tmarkerList.push(marker)\r\n\t\t\t\t})\r\n\r\n\t\t\t\tparkExportList.forEach(item => {\r\n\t\t\t\t\titem.icon = require('../../../static/icon/mark_icon_4.png')\r\n\t\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\r\n\t\t\t\t\titem.title = item.name\r\n\t\t\t\t\tconst marker = new AMap.Marker(item);\r\n\t\t\t\t\tmarkerList.push(marker)\r\n\t\t\t\t})\r\n\r\n\t\t\t\tparkIncomeList.forEach(item => {\r\n\t\t\t\t\titem.icon = require('../../../static/icon/mark_icon_5.png')\r\n\t\t\t\t\titem.position = new AMap.LngLat(item.longitude, item.latitude)\r\n\t\t\t\t\titem.title = item.name\r\n\t\t\t\t\tconst marker = new AMap.Marker(item);\r\n\t\t\t\t\tmarkerList.push(marker)\r\n\t\t\t\t})\r\n\r\n\t\t\t\tmap.add(markerList)\r\n\r\n\t\t\t\tmap.setFitView(null, true)\r\n\r\n\t\t\t\tmarkerList.forEach((item, index) => {\r\n\r\n\t\t\t\t\tAMap.event.addListener(item, 'click', (e) => {\r\n\t\t\t\t\t\tthis.openModal(e)\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenModal(e) {\r\n\t\t\t\tthis.info = []\r\n\t\t\t\tthis.list = []\r\n\t\t\t\tthis.instantsHeader = []\r\n\t\t\t\tthis.visible = true\r\n\t\t\t\tconsole.log(e.target.Ce)\r\n\t\t\t\tthis.title = e.target.Ce.title\r\n\t\t\t\tthis.code = e.target.Ce.code\r\n\t\t\t\tgetSignDetial({\r\n\t\t\t\t\tid: e.target.Ce.id,\r\n\t\t\t\t\tcode: e.target.Ce.code\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\tthis.info = res.result\r\n\t\t\t\t\t\tthis.list = e.target.Ce.code == 1 ? res.result.holes : res.result.wells\r\n\t\t\t\t\t\tthis.instantsHeader = e.target.Ce.code == 1 ? res.result.holes[0].instants : res.result\r\n\t\t\t\t\t\t\t.wells[0].instants\r\n\t\t\t\t\t\tconsole.log(this.list)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (e.target.Ce.code == 1) {\r\n\t\t\t\t\tgetWarning({\r\n\t\t\t\t\t\tid: e.target.Ce.id,\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (res.status === '0') {} else {\r\n\t\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.init()\r\n\t\t}\r\n\t})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\t.components-media-container {\r\n\t\theight: 100%;\r\n\t\tbackground-color: red;\r\n\t}\r\n\r\n\t.media-modal-tabbs {\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.media-modal-body {\r\n\t\theight: 520px;\r\n\t}\r\n\r\n\t.media-modal-form {\r\n\t\tpadding: 0 10px;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.media-modal-cell {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 50%;\r\n\t\theight: 40px;\r\n\t\tline-height: 40px;\r\n\t\tborder-bottom: 1px dashed #fff;\r\n\t}\r\n\r\n\t.media-modal-table {\r\n\t\ttext-align: initial;\r\n\r\n\t\t// overflow-x: scroll;\r\n\t\t.body {\r\n\t\t\theight: auto;\r\n\t\t}\r\n\r\n\t\t.header {\r\n\t\t\t// min-width: 100%;\r\n\t\t\t// white-space: nowrap;\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\t.th {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\theight: 35px;\r\n\t\t\t\tline-height: 35px;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.row {\r\n\t\t\t// min-width: 100%;\r\n\t\t\t// white-space: nowrap;\r\n\t\t\tborder: 0;\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\t.td {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\theight: 30px;\r\n\t\t\t\tline-height: 30px;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n"]}]}