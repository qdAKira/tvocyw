{"remainingRequest":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\yangkou-balance-management-system\\src\\components\\media\\rain\\equipment.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\yangkou-balance-management-system\\src\\components\\media\\rain\\equipment.vue","mtime":1623030183276},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1613790689000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\trainDeviceNumber,\n\trainMonitorStatus\n} from '@/request/api'\n\nexport default ({\n\tprops: {},\n\tdata() {\n\t\treturn {\n\t\t\tisMove: false,\n\t\t\topacity: '',\n\t\t\tacvtive: 1,\n\t\t\texportPercent: [],\n\t\t\tincomePercent: [],\n\t\t\tdom: null,\n\t\t\toption: {\n\t\t\t\ttooltip: {\n\t\t\t\t\ttrigger: 'item',\n\t\t\t\t\tformatter: params => {\n\t\t\t\t\t\treturn params.name + '：' + params.data.onlineNumber + '/' + params.value + '（在线/总数）'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tseries: {\n\t\t\t\t\ttype: 'pie',\n\t\t\t\t\tradius: [0, 90],\n\t\t\t\t\tcenter: ['50%', '50%'],\n\t\t\t\t\troseType: 'radius',\n\t\t\t\t\tlabel: {\n\t\t\t\t\t\tcolor: '#49b6db',\n\t\t\t\t\t\tformatter: '{b}',\n\t\t\t\t\t\tfontSize: 18\n\t\t\t\t\t},\n\t\t\t\t\tdata: [],\n\t\t\t\t\tcolor: ['#df1f20', '#9e8a6a', '#00ff00', '#2085ca', '#77c8ff', '#ccbe04', '#8820ca'],\n\t\t\t\t\titemStyle: {\n\t\t\t\t\t\tshadowColor: 'rgba(0, 0, 0, 0.5)',\n\t\t\t\t\t\tshadowBlur: 10\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tvisible: false,\n\t\t\tcurrent: 1,\n\t\t\ttotal: 0,\n\t\t\tactive: 0,\n\t\t\tonlineList: [],\n\t\t\toffList: [],\n\t\t\ttitle: ''\n\t\t}\n\t},\n\tcreated() {},\n\tmethods: {\n\t\tmyMoveIn() {\n\t\t\tthis.isMove = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.opacity = 1\n\t\t\t}, 1000)\n\t\t},\n\t\tmyMoveOut() {\n\t\t\tthis.opacity = 0\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.isMove = false\n\t\t\t}, 250)\n\t\t},\n\t\tonCancel() {\n\t\t\tthis.current = 1\n\t\t\tthis.active = 0\n\t\t},\n\t\ttypeChange(i) {\n\t\t\tthis.active = i\n\t\t\tthis.current = 1\n\t\t},\n\t\tgetMonitorStaus(id) {\n\t\t\trainMonitorStatus({\n\t\t\t\tRegionID: global.regionID,\n\t\t\t\tFactorID: id\n\t\t\t}).then(res => {\n\t\t\t\tif (res.status === '0') {\n\t\t\t\t\tthis.offList = res.result.offList\n\t\t\t\t\tthis.onlineList = res.result.onlineList\n\t\t\t\t\tthis.visible = true\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(res.message)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tonChange(current) {\n\t\t\tthis.current = current;\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.dom = this.$echarts.init(document.getElementById('water3'))\n\n\t\trainDeviceNumber({\n\t\t\tregionID: global.regionID,\n\t\t}).then(res => {\n\t\t\tif (res.status === '0') {\n\t\t\t\tconst series = res.result.map(item => ({\n\t\t\t\t\tname: item.factorName,\n\t\t\t\t\tvalue: item.number,\n\t\t\t\t\tid: item.factorID,\n\t\t\t\t\tonlineNumber: item.onlineNumber\n\t\t\t\t}))\n\n\t\t\t\tthis.option.series.data = series\n\t\t\t\tthis.dom.setOption(this.option)\n\t\t\t\tthis.dom.resize()\n\t\t\t\tthis.dom.on('click', params => {\n\t\t\t\t\tthis.title = params.name\n\t\t\t\t\tthis.getMonitorStaus(params.data.id)\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\tconsole.log(res.message)\n\t\t\t}\n\t\t})\n\n\t\tdocument.addEventListener('click', (e) => {\n\t\t\tif (this.$refs.equipment) {\n\t\t\t\tif (!this.$refs.equipment.contains(e.target)) {\n\t\t\t\t\tthis.visible = false\n\t\t\t\t\tthis.current = 1\n\t\t\t\t\tthis.active = 0\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n})\n",{"version":3,"sources":["equipment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"equipment.vue","sourceRoot":"src/components/media/rain","sourcesContent":["<template>\r\n\t<div class=\"media-warp\" :style=\"{bottom: isMove ? '-316px' : ''}\">\r\n\t\t<div class=\"media-warp-title\" @click=\"myMoveIn\">监测设备数量</div>\r\n\t\t<div class=\"media-warp-title active\" :style=\"{opacity: opacity}\" v-show=\"isMove\" @click=\"myMoveOut\">监测设备数量</div>\r\n\t\t<div class=\"media-warp-chart\">\r\n\t\t\t<div id=\"water3\" class=\"chart\"></div>\r\n\t\t</div>\r\n\t\t<div v-show=\"visible\" class=\"equipment-modal-body equipment\" ref=\"equipment\">\r\n\t\t\t<div class=\"equipment-modal-title\">监测设备（{{title}}）</div>\r\n\t\t\t<div class=\"equipment-modal-th\">\r\n\t\t\t\t<a-row>\r\n\t\t\t\t\t<a-col :span=\"3\">\r\n\t\t\t\t\t\t序号\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t\t<a-col :span=\"16\">\r\n\t\t\t\t\t\t名称\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t\t<a-col :span=\"5\" style=\"text-align: center;\">\r\n\t\t\t\t\t\t<span style=\"cursor: pointer;\" :style=\"{color: active == 0 ? '' : '#fff'}\"\r\n\t\t\t\t\t\t\t@click=\"typeChange(0)\">在线</span>/<span style=\"cursor: pointer;\"\r\n\t\t\t\t\t\t\t:style=\"{color: active == 1 ? '' : '#fff'}\" @click=\"typeChange(1)\">离线</span>\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t</a-row>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"equipment-modal-tr\" v-for=\"(item,index) in (active ? offList : onlineList)\"\r\n\t\t\t\tv-if=\"index < current * 10 && index >= (current - 1) * 10\">\r\n\t\t\t\t<a-row>\r\n\t\t\t\t\t<a-col :span=\"3\">\r\n\t\t\t\t\t\t{{index + 1 - (current - 1) * 10}}\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t\t<a-col :span=\"16\" style=\"overflow: hidden;text-overflow:ellipsis;white-space: nowrap;\">\r\n\t\t\t\t\t\t{{item.companyHole}}\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t\t<a-col :span=\"5\" style=\"text-align: center;\">\r\n\t\t\t\t\t\t{{item.onlineStatus}}\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t</a-row>\r\n\t\t\t</div>\r\n\t\t\t<a-pagination class=\"equipment-modal-page\" simple size=\"small\" :current=\"current\"\r\n\t\t\t\t:total=\"active ? offList.length : onlineList.length\" @change=\"onChange\" :pageSize=\"10\"\r\n\t\t\t\thideOnSinglePage />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\trainDeviceNumber,\r\n\t\trainMonitorStatus\r\n\t} from '@/request/api'\r\n\r\n\texport default ({\r\n\t\tprops: {},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisMove: false,\r\n\t\t\t\topacity: '',\r\n\t\t\t\tacvtive: 1,\r\n\t\t\t\texportPercent: [],\r\n\t\t\t\tincomePercent: [],\r\n\t\t\t\tdom: null,\r\n\t\t\t\toption: {\r\n\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\ttrigger: 'item',\r\n\t\t\t\t\t\tformatter: params => {\r\n\t\t\t\t\t\t\treturn params.name + '：' + params.data.onlineNumber + '/' + params.value + '（在线/总数）'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tseries: {\r\n\t\t\t\t\t\ttype: 'pie',\r\n\t\t\t\t\t\tradius: [0, 90],\r\n\t\t\t\t\t\tcenter: ['50%', '50%'],\r\n\t\t\t\t\t\troseType: 'radius',\r\n\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\tcolor: '#49b6db',\r\n\t\t\t\t\t\t\tformatter: '{b}',\r\n\t\t\t\t\t\t\tfontSize: 18\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\tcolor: ['#df1f20', '#9e8a6a', '#00ff00', '#2085ca', '#77c8ff', '#ccbe04', '#8820ca'],\r\n\t\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\t\tshadowColor: 'rgba(0, 0, 0, 0.5)',\r\n\t\t\t\t\t\t\tshadowBlur: 10\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tvisible: false,\r\n\t\t\t\tcurrent: 1,\r\n\t\t\t\ttotal: 0,\r\n\t\t\t\tactive: 0,\r\n\t\t\t\tonlineList: [],\r\n\t\t\t\toffList: [],\r\n\t\t\t\ttitle: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tmethods: {\r\n\t\t\tmyMoveIn() {\r\n\t\t\t\tthis.isMove = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.opacity = 1\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\tmyMoveOut() {\r\n\t\t\t\tthis.opacity = 0\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.isMove = false\r\n\t\t\t\t}, 250)\r\n\t\t\t},\r\n\t\t\tonCancel() {\r\n\t\t\t\tthis.current = 1\r\n\t\t\t\tthis.active = 0\r\n\t\t\t},\r\n\t\t\ttypeChange(i) {\r\n\t\t\t\tthis.active = i\r\n\t\t\t\tthis.current = 1\r\n\t\t\t},\r\n\t\t\tgetMonitorStaus(id) {\r\n\t\t\t\trainMonitorStatus({\r\n\t\t\t\t\tRegionID: global.regionID,\r\n\t\t\t\t\tFactorID: id\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\tthis.offList = res.result.offList\r\n\t\t\t\t\t\tthis.onlineList = res.result.onlineList\r\n\t\t\t\t\t\tthis.visible = true\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonChange(current) {\r\n\t\t\t\tthis.current = current;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.dom = this.$echarts.init(document.getElementById('water3'))\r\n\r\n\t\t\trainDeviceNumber({\r\n\t\t\t\tregionID: global.regionID,\r\n\t\t\t}).then(res => {\r\n\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\tconst series = res.result.map(item => ({\r\n\t\t\t\t\t\tname: item.factorName,\r\n\t\t\t\t\t\tvalue: item.number,\r\n\t\t\t\t\t\tid: item.factorID,\r\n\t\t\t\t\t\tonlineNumber: item.onlineNumber\r\n\t\t\t\t\t}))\r\n\r\n\t\t\t\t\tthis.option.series.data = series\r\n\t\t\t\t\tthis.dom.setOption(this.option)\r\n\t\t\t\t\tthis.dom.resize()\r\n\t\t\t\t\tthis.dom.on('click', params => {\r\n\t\t\t\t\t\tthis.title = params.name\r\n\t\t\t\t\t\tthis.getMonitorStaus(params.data.id)\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(res.message)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tif (this.$refs.equipment) {\r\n\t\t\t\t\tif (!this.$refs.equipment.contains(e.target)) {\r\n\t\t\t\t\t\tthis.visible = false\r\n\t\t\t\t\t\tthis.current = 1\r\n\t\t\t\t\t\tthis.active = 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\t.media-warp {\r\n\t\tposition: absolute;\r\n\t\tleft: 560px;\r\n\t\tbottom: 25px;\r\n\t\twidth: 400px;\r\n\t\theight: 316px;\r\n\t\tbackground: url(../../../../static/image/fixed4.png) no-repeat left bottom / 100% 300px;\r\n\t\ttransition: bottom 1s;\r\n\t\t-webkit-transition: bottom 1s;\r\n\r\n\t\t&-title {\r\n\t\t\twidth: 219px;\r\n\t\t\theight: 40px;\r\n\t\t\tmargin: 0 auto;\r\n\t\t\tbackground: url(../../../../static/image/fixed1-headr.png) no-repeat center center / 100% 100%;\r\n\t\t\tfont-size: 18px;\r\n\t\t\tline-height: 40px;\r\n\t\t\tcolor: #49b6db;\r\n\t\t\ttext-align: center;\r\n\t\t\tcursor: pointer;\r\n\r\n\t\t\t&.active {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: -45px;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tright: 0;\r\n\t\t\t\topacity: 0;\r\n\t\t\t\ttransition: opacity 0.5s;\r\n\t\t\t\t-webkit-transition: opacity 0.5s;\r\n\t\t\t\tmargin: auto;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&-chart {\r\n\t\t\theight: calc(100% - 40px);\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t.tabs {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 10px;\r\n\t\t\t\tright: 10px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\twidth: 110px;\r\n\t\t\t\theight: 26px;\r\n\t\t\t\tborder-radius: 8px;\r\n\t\t\t\tbackground-color: #06247d;\r\n\t\t\t\tz-index: 100;\r\n\r\n\t\t\t\tdiv {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\tline-height: 26px;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tcursor: pointer;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.active {\r\n\t\t\t\t\twidth: 66px;\r\n\t\t\t\t\tbackground-color: #13ecce;\r\n\t\t\t\t\tborder-radius: 9px;\r\n\t\t\t\t\tflex: none;\r\n\t\t\t\t\tcolor: #000;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.chart {\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.equipment-modal-title {\r\n\t\ttext-align: center;\r\n\t\tcolor: #49b6db;\r\n\t\tpadding: 5px 0;\r\n\t}\r\n\r\n\t.equipment-modal-th {\r\n\t\tcolor: #49b6db;\r\n\t\tborder-bottom: 1px solid rgba(255, 255, 255, 0.5);\r\n\t}\r\n\r\n\t.equipment-modal-tr {\r\n\t\tcolor: #fff;\r\n\t\tborder-bottom: 1px solid rgba(255, 255, 255, 0.5);\r\n\t}\r\n\r\n\t.equipment-modal-page {\r\n\t\ttext-align: center;\r\n\t\tcolor: #fff;\r\n\t\tmargin-top: 5px;\r\n\t}\r\n\r\n\t.equipment-modal-body {\r\n\t\theight: 309px;\r\n\r\n\t\t&.equipment {\r\n\t\t\tpadding: 0 15px 5px;\r\n\t\t\tbackground-color: rgba(38, 68, 111, 0.8);\r\n\t\t\tborder-radius: 20px;\r\n\t\t\tborder: solid 1px #00e8ff;\r\n\t\t\ttop: -315px;\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 400px;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tmargin: auto;\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n<style lang=\"less\">\r\n\t.equipment-modal-dialog {\r\n\t\tborder-radius: 20px;\r\n\t\tborder: solid 1px #00e8ff;\r\n\t\tpadding-bottom: 0;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.ant-modal-content {\r\n\t\t\tbackground-color: rgba(38, 68, 111, 0.8);\r\n\t\t}\r\n\r\n\t\t.ant-modal-body {\r\n\t\t\tpadding: 0 15px 5px;\r\n\t\t}\r\n\t}\r\n\r\n\t.equipment-modal-page {\r\n\t\ttext-align: center;\r\n\t\tcolor: #fff;\r\n\r\n\t\ta {\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\r\n\t\t.ant-pagination-simple-pager input {\r\n\t\t\tbackground-color: #0d44bd;\r\n\t\t}\r\n\r\n\t\t.ant-pagination-simple-pager input:hover {\r\n\t\t\tborder-color: #fff;\r\n\t\t}\r\n\r\n\t\t.ant-pagination-disabled .ant-pagination-item-link {\r\n\t\t\tcolor: #d6d9d9;\r\n\t\t}\r\n\t}\r\n</style>\n"]}]}