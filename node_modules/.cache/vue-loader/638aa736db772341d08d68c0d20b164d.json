{"remainingRequest":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\yangkou-balance-management-system\\src\\page\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\yangkou-balance-management-system\\src\\page\\login.vue","mtime":1623030921076},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613790689000},{"path":"D:\\Git\\yangkou-balance-management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1613790689000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet sha1 = require('sha1')\n\nconst Base64 = require('js-base64').Base64\n\nimport Sidentify from '@/components/sidentify.vue'\n\nimport {\n\tapiLogin,\n\tgetTokenApi,\n\tgetRegionName,\n\taddDegoins,\n} from '@/request/api'\n\nexport default {\n\tcomponents: {\n\t\t'v-sidentify': Sidentify\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tverifier: '',\n\t\t\tremember: false,\n\t\t\tform: this.$form.createForm(this, {\n\t\t\t\tname: 'normal_login'\n\t\t\t}),\n\t\t\tfakeRouterC: []\n\t\t};\n\t},\n\tcreated() {},\n\tmethods: {\n\t\tcode(e) {\n\t\t\tthis.verifier = e\n\t\t},\n\t\thandleSubmit(e) {\n\t\t\te.preventDefault();\n\t\t\tthis.form.validateFields((err, values) => {\n\t\t\t\tif (!err) {\n\t\t\t\t\tif (this.verifier.toLowerCase() != values.verifier.toLowerCase()) {\n\t\t\t\t\t\tthis.$message.error({\n\t\t\t\t\t\t\tcontent: '验证码错误，请重新输入！',\n\t\t\t\t\t\t\tkey: 'loading',\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.$refs.sidentify.draw()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t// values.Password = sha1(values.Password).toUpperCase()\n\t\t\t\t\tlocalStorage.setItem('token', '')\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\tUserName: values.UserName,\n\t\t\t\t\t\tPassword: values.Password\n\t\t\t\t\t}\n\t\t\t\t\tthis.login(values)\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tasync login(values) {\n\t\t\tthis.$message.loading({\n\t\t\t\tcontent: '登录中...',\n\t\t\t\tkey: 'loading'\n\t\t\t})\n\t\t\tawait apiLogin({\n\t\t\t\tUserName: values.UserName,\n\t\t\t\tPassword: sha1(values.Password).toUpperCase()\n\t\t\t}).then(res => {\n\t\t\t\tif (res.status == 0) {\n\t\t\t\t\tlocalStorage.setItem('token', res.result.token)\n\t\t\t\t\tlocalStorage.setItem('regoins', JSON.stringify(res.result.regoins))\n\t\t\t\t\tlocalStorage.setItem('regionID', res.result.regionID)\n\t\t\t\t\tlocalStorage.setItem('roleID', res.result.roleID)\n\t\t\t\t\tlocalStorage.setItem('userID', res.result.userID)\n\t\t\t\t\tlocalStorage.setItem('userName', res.result.userName)\n\t\t\t\t\tlocalStorage.setItem('companyID', res.result.companyID)\n\t\t\t\t\tlocalStorage.setItem('chineseUserName', res.result.chineseUserName)\n\t\t\t\t\tglobal.regoins = JSON.parse(localStorage.getItem('regoins'))\n\t\t\t\t\tglobal.regionID = localStorage.getItem('regionID')\n\t\t\t\t\tglobal.userID = localStorage.getItem('userID')\n\t\t\t\t\tglobal.roleID = localStorage.getItem('roleID')\n\t\t\t\t\tglobal.companyID = localStorage.getItem('companyID')\n\t\t\t\t\tglobal.chineseUserName = localStorage.getItem('chineseUserName')\n\n\t\t\t\t\tlet fakeRouter = res.result.routeUrl\n\t\t\t\t\tthis.fakeRouterUp(fakeRouter)\n\t\t\t\t\t\n\t\t\t\t\tlocalStorage.setItem('fakeRouter', JSON.stringify(fakeRouter))\n\t\t\t\t\tlocalStorage.setItem('children', JSON.stringify(fakeRouter))\n\n\t\t\t\t\tthis.setUserInfo(values)\n\t\t\t\t} else {\n\t\t\t\t\tthis.$message.error({\n\t\t\t\t\t\tcontent: res.message,\n\t\t\t\t\t\tkey: 'loading',\n\t\t\t\t\t\tduration: 1,\n\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\tthis.$refs.sidentify.draw()\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\tif (global.regionID) {\n\t\t\t\taddDegoins({\n\t\t\t\t\tregionID: global.regionID\n\t\t\t\t}).then(res => {\n\t\t\t\t\tif (res.status === '0') {\n\t\t\t\t\t\tlet degoinsGrade = []\n\t\t\t\t\t\tlet n = 0\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tres.result.forEach((item, index, array) => {\n\t\t\t\t\t\t\t\tif (index == 0) {\n\t\t\t\t\t\t\t\t\tdegoinsGrade.push([])\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdegoinsGrade[n].push(item)\n\t\t\t\t\t\t\t\tif (index == array.length - 1) {\n\t\t\t\t\t\t\t\t\tthrow new Error(\"End\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (item.regoinLevel != array[index + 1].regoinLevel) {\n\t\t\t\t\t\t\t\t\tdegoinsGrade.push([])\n\t\t\t\t\t\t\t\t\tn++\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tif (e.message != \"End\") throw e;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdegoinsGrade.reverse().forEach((item, index, array) => {\n\t\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\t\titem.forEach(next => {\n\t\t\t\t\t\t\t\t\tif (next.child == undefined) {\n\t\t\t\t\t\t\t\t\t\tnext.child = new Array\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tarray[index - 1].forEach(child => {\n\t\t\t\t\t\t\t\t\t\tif (next.id == child.parentID) {\n\t\t\t\t\t\t\t\t\t\t\tnext.child.push(child)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tlocalStorage.setItem('addDegoins', JSON.stringify(degoinsGrade.reverse()[0]))\n\t\t\t\t\t\tglobal.addDegoins = JSON.parse(localStorage.getItem('addDegoins'))\n\n\t\t\t\t\t\tthis.$message.success({\n\t\t\t\t\t\t\tcontent: '登录成功!',\n\t\t\t\t\t\t\tkey: 'loading',\n\t\t\t\t\t\t\tduration: 0.5,\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.$router.push({\n\t\t\t\t\t\t\t\t\tpath: '/'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$message.error({\n\t\t\t\t\t\t\tcontent: res.message,\n\t\t\t\t\t\t\tkey: 'loading',\n\t\t\t\t\t\t\tduration: 0.5,\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\tthis.$refs.sidentify.draw()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t// 获取cookie\n\t\tgetCookie: function(key) {\n\t\t\tif (document.cookie.length > 0) {\n\t\t\t\tvar start = document.cookie.indexOf(key + \"=\");\n\t\t\t\tif (start !== -1) {\n\t\t\t\t\tstart = start + key.length + 1;\n\t\t\t\t\tvar end = document.cookie.indexOf(\";\", start);\n\t\t\t\t\tif (end === -1) end = document.cookie.length;\n\t\t\t\t\treturn unescape(document.cookie.substring(start, end));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn \"\";\n\t\t},\n\t\t// 保存cookie\n\t\tsetCookie: function(cName, value, expiredays) {\n\t\t\tvar exdate = new Date();\n\t\t\texdate.setDate(exdate.getDate() + expiredays);\n\t\t\tdocument.cookie =\n\t\t\t\tcName +\n\t\t\t\t\"=\" +\n\t\t\t\tdecodeURIComponent(value) +\n\t\t\t\t(expiredays == null ? \"\" : \";expires=\" + exdate.toGMTString());\n\t\t},\n\t\tsetUserInfo: function(values) {\n\t\t\t// 判断用户是否勾选记住密码，如果勾选，向cookie中储存登录信息，\n\t\t\t// 如果没有勾选，储存的信息为空\n\t\t\tif (this.remember) {\n\t\t\t\tthis.setCookie(\"account\", values.UserName, 7);\n\t\t\t\t// base64加密密码\n\t\t\t\tlet passWord = Base64.encode(values.Password);\n\t\t\t\tthis.setCookie(\"password\", passWord, 7);\n\t\t\t\tthis.setCookie(\"remember\", this.remember, 7);\n\t\t\t} else {\n\t\t\t\tthis.setCookie(\"account\", \"\");\n\t\t\t\tthis.setCookie(\"password\", \"\");\n\t\t\t}\n\t\t},\n\t\twarning() {\n\t\t\tthis.$warning({\n\t\t\t\ttitle: '浏览器使用说明',\n\t\t\t\tcontent: '本系统支持使用谷歌浏览器或360极速模式，其它浏览器下使用本系统会影响部分效果或功能无法使用。请使用谷歌浏览器或360极速模式访问本系统，最佳浏览器分辨率等于1920*1080。',\n\t\t\t\tcentered: true\n\t\t\t});\n\t\t},\n\t\tfakeRouterUp(router) {\n\t\t\trouter.forEach(item => {\n\t\t\t\tif (item.children && item.children.length) {\n\t\t\t\t\tthis.fakeRouterUp(item.children)\n\t\t\t\t} else {\n\t\t\t\t\titem.component = item.path.substr(1)\n\t\t\t\t\tthis.fakeRouterC.push(item)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n\tmounted() {\n\t\tlet account = this.getCookie(\"account\");\n\t\tlet password = Base64.decode(this.getCookie(\"password\"));\n\t\tif (account) {\n\t\t\tthis.form.setFieldsValue({\n\t\t\t\tUserName: account,\n\t\t\t\tPassword: password,\n\t\t\t});\n\t\t\tthis.remember = true\n\t\t}\n\t}\n};\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/page","sourcesContent":["<template>\r\n\t<div class=\"login-mode\">\r\n\t\t<div class=\"login-title\">\r\n\t\t\t<img src=\"../../static/image/logo-1.png\" alt=\"\">\r\n\t\t\t洋口园区水环境管理系统\r\n\t\t</div>\r\n\t\t<div class=\"login-text1\"><span style=\"color: #4de8ff;\">保护</span>环境</div>\r\n\t\t<div class=\"login-text2\">共建<span style=\"color: #1dff72;\">生态洋口</span></div>\r\n\t\t<div class=\"login-form\">\r\n\t\t\t<div class=\"login-from-title\">用户登录</div>\r\n\t\t\t<a-form :form=\"form\" @submit=\"handleSubmit\">\r\n\t\t\t\t<a-form-item>\r\n\t\t\t\t\t<div class=\"login-input\">\r\n\t\t\t\t\t\t<label class=\"login-label user\"></label>\r\n\t\t\t\t\t\t<div class=\"login-flex\">\r\n\t\t\t\t\t\t\t<a-input autoComplete=\"off\"\r\n\t\t\t\t\t\t\t\tv-decorator=\"['UserName',{ rules: [{ required: true, message: '请输入用户名!' }]},]\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"用户名\">\r\n\t\t\t\t\t\t\t</a-input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a-form-item>\r\n\t\t\t\t<a-form-item>\r\n\t\t\t\t\t<div class=\"login-input\">\r\n\t\t\t\t\t\t<label class=\"login-label pass\"></label>\r\n\t\t\t\t\t\t<div class=\"login-flex\">\r\n\t\t\t\t\t\t\t<a-input v-decorator=\"[ 'Password', { rules: [{ required: true, message: '请输入密码!' }] },]\"\r\n\t\t\t\t\t\t\t\ttype=\"password\" placeholder=\"密码\">\r\n\t\t\t\t\t\t\t</a-input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a-form-item>\r\n\t\t\t\t<a-form-item style=\"position: relative;\">\r\n\t\t\t\t\t<div class=\"login-input sidentify\" style=\"align-items: center;padding-right: 1px;\">\r\n\t\t\t\t\t\t<div class=\"login-flex\">\r\n\t\t\t\t\t\t\t<a-input autoComplete=\"off\"\r\n\t\t\t\t\t\t\t\tv-decorator=\"[ 'verifier', { rules: [{ required: true, message: '请输入验证码!' }] },]\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"输入验证码\">\r\n\t\t\t\t\t\t\t</a-input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<v-sidentify ref=\"sidentify\" @Change=\"code($event)\"></v-sidentify>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a-form-item>\r\n\t\t\t\t<div class=\"login-box-footer\">\r\n\t\t\t\t\t<div class=\"login-remember\">\r\n\t\t\t\t\t\t<div class=\"login-remember-icon\" :class=\"{remember: remember}\" @click=\"remember = !remember\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t记住密码\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<a-button type=\"primary\" html-type=\"submit\" block shape=\"round\" class=\"login-button\">\r\n\t\t\t\t\t\t登录\r\n\t\t\t\t\t</a-button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"login-form-tips\">\r\n\t\t\t\t\t<a href=\"javascript:;\" style=\"color: #fd1d1d;\" @click=\"warning\">浏览器使用说明</a>\r\n\t\t\t\t</div>\r\n\t\t\t</a-form>\r\n\t\t</div>\r\n\t\t<div class=\"login-tips\">@版权所有 江苏尚维斯环境科技有限公司</div>\r\n\t</div>\r\n</template>\r\n<script>\r\n\tlet sha1 = require('sha1')\r\n\r\n\tconst Base64 = require('js-base64').Base64\r\n\r\n\timport Sidentify from '@/components/sidentify.vue'\r\n\r\n\timport {\r\n\t\tapiLogin,\r\n\t\tgetTokenApi,\r\n\t\tgetRegionName,\r\n\t\taddDegoins,\r\n\t} from '@/request/api'\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\t'v-sidentify': Sidentify\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tverifier: '',\r\n\t\t\t\tremember: false,\r\n\t\t\t\tform: this.$form.createForm(this, {\r\n\t\t\t\t\tname: 'normal_login'\r\n\t\t\t\t}),\r\n\t\t\t\tfakeRouterC: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tmethods: {\r\n\t\t\tcode(e) {\r\n\t\t\t\tthis.verifier = e\r\n\t\t\t},\r\n\t\t\thandleSubmit(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.form.validateFields((err, values) => {\r\n\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\tif (this.verifier.toLowerCase() != values.verifier.toLowerCase()) {\r\n\t\t\t\t\t\t\tthis.$message.error({\r\n\t\t\t\t\t\t\t\tcontent: '验证码错误，请重新输入！',\r\n\t\t\t\t\t\t\t\tkey: 'loading',\r\n\t\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\t\tthis.$refs.sidentify.draw()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// values.Password = sha1(values.Password).toUpperCase()\r\n\t\t\t\t\t\tlocalStorage.setItem('token', '')\r\n\t\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\t\tUserName: values.UserName,\r\n\t\t\t\t\t\t\tPassword: values.Password\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.login(values)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync login(values) {\r\n\t\t\t\tthis.$message.loading({\r\n\t\t\t\t\tcontent: '登录中...',\r\n\t\t\t\t\tkey: 'loading'\r\n\t\t\t\t})\r\n\t\t\t\tawait apiLogin({\r\n\t\t\t\t\tUserName: values.UserName,\r\n\t\t\t\t\tPassword: sha1(values.Password).toUpperCase()\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.status == 0) {\r\n\t\t\t\t\t\tlocalStorage.setItem('token', res.result.token)\r\n\t\t\t\t\t\tlocalStorage.setItem('regoins', JSON.stringify(res.result.regoins))\r\n\t\t\t\t\t\tlocalStorage.setItem('regionID', res.result.regionID)\r\n\t\t\t\t\t\tlocalStorage.setItem('roleID', res.result.roleID)\r\n\t\t\t\t\t\tlocalStorage.setItem('userID', res.result.userID)\r\n\t\t\t\t\t\tlocalStorage.setItem('userName', res.result.userName)\r\n\t\t\t\t\t\tlocalStorage.setItem('companyID', res.result.companyID)\r\n\t\t\t\t\t\tlocalStorage.setItem('chineseUserName', res.result.chineseUserName)\r\n\t\t\t\t\t\tglobal.regoins = JSON.parse(localStorage.getItem('regoins'))\r\n\t\t\t\t\t\tglobal.regionID = localStorage.getItem('regionID')\r\n\t\t\t\t\t\tglobal.userID = localStorage.getItem('userID')\r\n\t\t\t\t\t\tglobal.roleID = localStorage.getItem('roleID')\r\n\t\t\t\t\t\tglobal.companyID = localStorage.getItem('companyID')\r\n\t\t\t\t\t\tglobal.chineseUserName = localStorage.getItem('chineseUserName')\r\n\r\n\t\t\t\t\t\tlet fakeRouter = res.result.routeUrl\r\n\t\t\t\t\t\tthis.fakeRouterUp(fakeRouter)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlocalStorage.setItem('fakeRouter', JSON.stringify(fakeRouter))\r\n\t\t\t\t\t\tlocalStorage.setItem('children', JSON.stringify(fakeRouter))\r\n\r\n\t\t\t\t\t\tthis.setUserInfo(values)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error({\r\n\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\tkey: 'loading',\r\n\t\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\tthis.$refs.sidentify.draw()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (global.regionID) {\r\n\t\t\t\t\taddDegoins({\r\n\t\t\t\t\t\tregionID: global.regionID\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tif (res.status === '0') {\r\n\t\t\t\t\t\t\tlet degoinsGrade = []\r\n\t\t\t\t\t\t\tlet n = 0\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tres.result.forEach((item, index, array) => {\r\n\t\t\t\t\t\t\t\t\tif (index == 0) {\r\n\t\t\t\t\t\t\t\t\t\tdegoinsGrade.push([])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tdegoinsGrade[n].push(item)\r\n\t\t\t\t\t\t\t\t\tif (index == array.length - 1) {\r\n\t\t\t\t\t\t\t\t\t\tthrow new Error(\"End\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (item.regoinLevel != array[index + 1].regoinLevel) {\r\n\t\t\t\t\t\t\t\t\t\tdegoinsGrade.push([])\r\n\t\t\t\t\t\t\t\t\t\tn++\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\tif (e.message != \"End\") throw e;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdegoinsGrade.reverse().forEach((item, index, array) => {\r\n\t\t\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\t\t\titem.forEach(next => {\r\n\t\t\t\t\t\t\t\t\t\tif (next.child == undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tnext.child = new Array\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tarray[index - 1].forEach(child => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (next.id == child.parentID) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tnext.child.push(child)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tlocalStorage.setItem('addDegoins', JSON.stringify(degoinsGrade.reverse()[0]))\r\n\t\t\t\t\t\t\tglobal.addDegoins = JSON.parse(localStorage.getItem('addDegoins'))\r\n\r\n\t\t\t\t\t\t\tthis.$message.success({\r\n\t\t\t\t\t\t\t\tcontent: '登录成功!',\r\n\t\t\t\t\t\t\t\tkey: 'loading',\r\n\t\t\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\t\t\tpath: '/'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error({\r\n\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\tkey: 'loading',\r\n\t\t\t\t\t\t\t\tduration: 0.5,\r\n\t\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\t\tthis.$refs.sidentify.draw()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取cookie\r\n\t\t\tgetCookie: function(key) {\r\n\t\t\t\tif (document.cookie.length > 0) {\r\n\t\t\t\t\tvar start = document.cookie.indexOf(key + \"=\");\r\n\t\t\t\t\tif (start !== -1) {\r\n\t\t\t\t\t\tstart = start + key.length + 1;\r\n\t\t\t\t\t\tvar end = document.cookie.indexOf(\";\", start);\r\n\t\t\t\t\t\tif (end === -1) end = document.cookie.length;\r\n\t\t\t\t\t\treturn unescape(document.cookie.substring(start, end));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\t// 保存cookie\r\n\t\t\tsetCookie: function(cName, value, expiredays) {\r\n\t\t\t\tvar exdate = new Date();\r\n\t\t\t\texdate.setDate(exdate.getDate() + expiredays);\r\n\t\t\t\tdocument.cookie =\r\n\t\t\t\t\tcName +\r\n\t\t\t\t\t\"=\" +\r\n\t\t\t\t\tdecodeURIComponent(value) +\r\n\t\t\t\t\t(expiredays == null ? \"\" : \";expires=\" + exdate.toGMTString());\r\n\t\t\t},\r\n\t\t\tsetUserInfo: function(values) {\r\n\t\t\t\t// 判断用户是否勾选记住密码，如果勾选，向cookie中储存登录信息，\r\n\t\t\t\t// 如果没有勾选，储存的信息为空\r\n\t\t\t\tif (this.remember) {\r\n\t\t\t\t\tthis.setCookie(\"account\", values.UserName, 7);\r\n\t\t\t\t\t// base64加密密码\r\n\t\t\t\t\tlet passWord = Base64.encode(values.Password);\r\n\t\t\t\t\tthis.setCookie(\"password\", passWord, 7);\r\n\t\t\t\t\tthis.setCookie(\"remember\", this.remember, 7);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setCookie(\"account\", \"\");\r\n\t\t\t\t\tthis.setCookie(\"password\", \"\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twarning() {\r\n\t\t\t\tthis.$warning({\r\n\t\t\t\t\ttitle: '浏览器使用说明',\r\n\t\t\t\t\tcontent: '本系统支持使用谷歌浏览器或360极速模式，其它浏览器下使用本系统会影响部分效果或功能无法使用。请使用谷歌浏览器或360极速模式访问本系统，最佳浏览器分辨率等于1920*1080。',\r\n\t\t\t\t\tcentered: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfakeRouterUp(router) {\r\n\t\t\t\trouter.forEach(item => {\r\n\t\t\t\t\tif (item.children && item.children.length) {\r\n\t\t\t\t\t\tthis.fakeRouterUp(item.children)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.component = item.path.substr(1)\r\n\t\t\t\t\t\tthis.fakeRouterC.push(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tlet account = this.getCookie(\"account\");\r\n\t\t\tlet password = Base64.decode(this.getCookie(\"password\"));\r\n\t\t\tif (account) {\r\n\t\t\t\tthis.form.setFieldsValue({\r\n\t\t\t\t\tUserName: account,\r\n\t\t\t\t\tPassword: password,\r\n\t\t\t\t});\r\n\t\t\t\tthis.remember = true\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.login-mode {\r\n\t\twidth: 100%;\r\n\t\tmin-width: 1200px;\r\n\t\theight: 100%;\r\n\t\tbackground: url(../../static/image/bg-2.png) no-repeat 0 0 / 100% 100%;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.login-title {\r\n\t\tfont-size: 60px;\r\n\t\tletter-spacing: 0px;\r\n\t\tcolor: #fefefe;\r\n\t\t/* text-align: center; */\r\n\t\t/* text-shadow: 0 0 9px #00eaff; */\r\n\t\tline-height: 1;\r\n\t\tmargin: 0 auto 15px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: absolute;\r\n\t\ttop: 8vh;\r\n\t\tleft: 7vw;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.login-title>img {\r\n\t\twidth: 113px;\r\n\t\theight: 113px;\r\n\t\tdisplay: block;\r\n\t\tmargin-right: 20px;\r\n\t}\r\n\r\n\t.login-title-line {\r\n\t\twidth: 459px;\r\n\t\theight: 21px;\r\n\t\tmargin: 0 auto;\r\n\t\tbackground: url(../../static/image/login-title-line.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.login-con {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\twidth: 1430px;\r\n\t\tmargin: auto;\r\n\t\theight: 655px;\r\n\t}\r\n\r\n\t.login-map {\r\n\t\tposition: absolute;\r\n\t\twidth: 650px;\r\n\t\theight: 655px;\r\n\t\tbackground: url(../../static/image/login-map.png) no-repeat 0 0 / 100% 100%;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t}\r\n\r\n\t.login-form {\r\n\t\twidth: 549px;\r\n\t\theight: 403px;\r\n\t\tbackground: url(../../static/image/login-box-2.png) no-repeat 0 0 / 100% 100%;\r\n\t\tposition: absolute;\r\n\t\tright: 11vw;\r\n\t\ttop: 35vh;\r\n\t\tpadding: 15px 64px 0 58px;\r\n\t}\r\n\r\n\t.login-input {\r\n\t\tdisplay: flex;\r\n\t\theight: 47px;\r\n\t\t/* background: url(../../static/image/login-input-bg.png) no-repeat 0 0 / 100% 100%; */\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 50px;\r\n\t\tpadding-right: 30px;\r\n\t}\r\n\r\n\t.login-input.sidentify {\r\n\t\t/* background-image: url(../../static/image/login-sidentify-bg.png); */\r\n\t\tbackground-color: #fff;\r\n\t\tpadding-left: 25px;\r\n\t}\r\n\r\n\t.login-input label {\r\n\t\tposition: relative;\r\n\t\tdisplay: block;\r\n\t\twidth: 65px;\r\n\t}\r\n\r\n\t.login-input label::after {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\twidth: 2px;\r\n\t\theight: 33px;\r\n\t\tbackground-color: #39c1ff;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tright: 0;\r\n\t\tmargin: auto;\r\n\t}\r\n\r\n\t.login-input .login-flex {\r\n\t\tflex: 1;\r\n\t\tpadding: 10px;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.login-input>div>input {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tline-height: 23px;\r\n\t\tbackground-color: transparent;\r\n\t\tborder: 0;\r\n\t\toutline: 0;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.login-label.user {\r\n\t\tbackground: url(../../static/icon/login-icon-user-2.png) no-repeat 20px center / 25px 31px;\r\n\t}\r\n\r\n\t.login-label.pass {\r\n\t\tbackground: url(../../static/icon/login-icon-pass-2.png) no-repeat 20px center / 25px 31px;\r\n\t}\r\n\r\n\t.login-remember {\r\n\t\tflex: 1;\r\n\t\theight: 19px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 15px;\r\n\t\tfont-weight: normal;\r\n\t\tfont-stretch: normal;\r\n\t\tletter-spacing: 0px;\r\n\t\tcolor: #fff;\r\n\t\tline-height: 1;\r\n\t\tleft: 0;\r\n\t\ttop: 54px;\r\n\t}\r\n\r\n\t.login-remember-icon {\r\n\t\twidth: 15px;\r\n\t\theight: 16px;\r\n\t\tbackground: url(../../static/icon/login-checked-0.png) no-repeat 0 0 / 100% 100%;\r\n\t\tmargin: 0 4px 3px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.login-remember-icon.remember {\r\n\t\tbackground-image: url(../../static/icon/login-checked-1.png);\r\n\t}\r\n\r\n\t.login-button {\r\n\t\twidth: 283px;\r\n\t\theight: 50px;\r\n\t\t/* background: url(../../static/image/login-button-bg.png) no-repeat 0 0 / 100% 100%; */\r\n\t\tbackground-color: #39c1ff;\r\n\t\ttext-align: center;\r\n\t\tline-height: 50px;\r\n\t\tfont-size: 24px;\r\n\t\tcolor: #fff;\r\n\t\tcursor: pointer;\r\n\t\t/* margin-top: 8px; */\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.login-input .ant-input {\r\n\t\tpadding: 0;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.login-form .ant-form-item {\r\n\t\tmargin-bottom: 35px;\r\n\t}\r\n\r\n\t.login-form .ant-form-item-with-help {\r\n\t\tmargin-bottom: 0px;\r\n\t}\r\n\r\n\t.login-map-icon {\r\n\t\ttext-align: center;\r\n\t\tposition: absolute;\r\n\t\tfont-size: 15px;\r\n\t\tcolor: #00eaff;\r\n\t}\r\n\r\n\t.login-map-icon>div {\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.login-map-icon>div:hover {\r\n\t\ttransform: scale(1.2);\r\n\t}\r\n\r\n\t.login-map-sphgl {\r\n\t\twidth: 91px;\r\n\t\theight: 91px;\r\n\t\tbackground: url(../../static/icon/sphgl.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.login-map-jkdp {\r\n\t\twidth: 85px;\r\n\t\theight: 85px;\r\n\t\tbackground: url(../../static/icon/jkdp.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.login-map-ycjk {\r\n\t\twidth: 76px;\r\n\t\theight: 76px;\r\n\t\tbackground: url(../../static/icon/ycjk.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.login-map-ssjk {\r\n\t\twidth: 76px;\r\n\t\theight: 76px;\r\n\t\tbackground: url(../../static/icon/ssjk.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.login-map-bjyj {\r\n\t\twidth: 85px;\r\n\t\theight: 85px;\r\n\t\tbackground: url(../../static/icon/bjyj.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.login-map-sjtjybb {\r\n\t\twidth: 91px;\r\n\t\theight: 91px;\r\n\t\tbackground: url(../../static/icon/sjtjybb.png) no-repeat 0 0 / 100% 100%;\r\n\t}\r\n\r\n\t.login-map-icon.sphgl {\r\n\t\ttop: -70px;\r\n\t\tleft: 110px;\r\n\t}\r\n\r\n\t.login-map-icon.jkdp {\r\n\t\tleft: 179px;\r\n\t\ttop: 175px;\r\n\t}\r\n\r\n\t.login-map-icon.ycjk {\r\n\t\tleft: 268px;\r\n\t\ttop: 115px;\r\n\t}\r\n\r\n\t.login-map-icon.ssjk {\r\n\t\tleft: 305px;\r\n\t\ttop: 253px;\r\n\t}\r\n\r\n\t.login-map-icon.bjyj {\r\n\t\tleft: 424px;\r\n\t\ttop: 32px;\r\n\t}\r\n\r\n\t.login-map-icon.sjtjybb {\r\n\t\tleft: 452px;\r\n\t\ttop: 368px;\r\n\t}\r\n\r\n\t.login-tips {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 20px;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.login-box-footer {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.login-from-title {\r\n\t\tfont-size: 26px;\r\n\t\tcolor: #fefefe;\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.login-text1 {\r\n\t\tfont-size: 60px;\r\n\t\tcolor: #fff;\r\n\t\tanimation-name: text1;\r\n\t\tanimation-duration: 10s;\r\n\t\tposition: absolute;\r\n\t\ttop: 393px;\r\n\t\tleft: 272px;\r\n\t\tanimation-iteration-count: infinite;\r\n\t\topacity: 0;\r\n\t\tfont-family: \"zkkh\";\r\n\t}\r\n\r\n\t.login-text2 {\r\n\t\tfont-size: 60px;\r\n\t\tcolor: #fff;\r\n\t\tanimation-name: text1;\r\n\t\tanimation-duration: 10s;\r\n\t\tposition: absolute;\r\n\t\ttop: 474px;\r\n\t\tleft: 382px;\r\n\t\tanimation-iteration-count: infinite;\r\n\t\tanimation-delay: 1.5s;\r\n\t\topacity: 0;\r\n\t\tfont-family: \"zkkh\";\r\n\t}\r\n\r\n\t.login-form-tips {\r\n\t\tfont-size: 18px;\r\n\t\ttext-align: center;\r\n\t\tmargin-top: 8px;\r\n\t}\r\n\r\n\t@keyframes text1 {\r\n\t\t0% {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: scale(2.5)\r\n\t\t}\r\n\r\n\t\t0.5% {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t12.5% {\r\n\t\t\ttransform: scale(1)\r\n\t\t}\r\n\r\n\t\t25% {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t75% {\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t75.5% {\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n<style>\r\n\t.login-form .ant-form-explain {\r\n\t\tmin-height: 35px;\r\n\t\tline-height: 35px;\r\n\t\tmargin-top: 0;\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n</style>\n"]}]}